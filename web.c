#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <winsock2.h>

#include "web.h"
#include "handshakeKey.h"
#include "db.h"
#include "webhudgit.h"

#pragma comment(lib, "ws2_32.lib")

//char* responz[57000] = "";
char* response = "HTTP/1.1 200 OK\r\nContent-Type: text/html\r\n\r\n";
char* responz1 = "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n<title>Your Page Title</title>\n<script>\nfunction getTemperatureColor(temp, cold_temp, optimal_temp, hot_temp) {\nvar color;\nif (temp <= cold_temp) {\ncolor = `rgb(0,0,255)`;\n} else if (temp >= hot_temp) {\ncolor = `rgb(255,0,0)`;\n} else if (temp == optimal_temp) {\ncolor = `rgb(0,255,0)`;\n} else if (temp < optimal_temp) {\nvar ratio = (temp - cold_temp) / (optimal_temp - cold_temp);\ncolor = `rgb(0, ${Math.floor(255 * ratio)}, ${Math.floor(255 * (1 - ratio))})`;\n} else {\nvar ratio = (temp - optimal_temp) / (hot_temp - optimal_temp);\ncolor = `rgb(${Math.floor(255 * ratio)}, ${Math.floor(255 * (1 - ratio*1.2))}, 0)`;\n}\nreturn color;\n}\nconst socket = new WebSocket('ws://localhost:8082');\nvar loadedRat = {};\nloadedRat[-1] = {\n\"UserId\" : -1,\n\"Fullname\" : \"bot\",\n\"Rating\" : 0,\n\"Reputation\" : 0\n};\ndocument.addEventListener(\"DOMContentLoaded\", function (event) {\nvar lastLap = document.querySelector(\"#lastlap\");\nvar bestLapLead = document.querySelector(\"#bestlaplead\");\nvar delta = document.querySelector(\"#delta\");\nvar bestLap = document.querySelector(\"#bestlap\");\nvar fuelMonitorTds = document.querySelectorAll(\"#fuelmonitor td\");\nvar inputsTds = document.querySelectorAll(\"#inputs td\");\nvar wheelsTds = document.querySelectorAll(\"#wheels td\");\nvar relativeTrs = document.querySelectorAll(\"#relative tr\");\nvar relativeTds = {};\nvar startLight = document.querySelector(\"#startLight\");\nvar startLightDivs = document.querySelectorAll(\"#startLight div\");\nvar flTemp1 = document.querySelector(\"#flTemp1\");\nvar flWear = document.querySelector(\"#flWear\");\nvar flPressure = document.querySelector(\"#flPressure\");\nvar flDirt = document.querySelector(\"#flDirt\");\nvar flBrake = document.querySelector(\"#flBrake\");\nvar flTemp2 = document.querySelector(\"#flTemp2\");\nvar flTemp3 = document.querySelector(\"#flTemp3\");\nvar frTemp1 = document.querySelector(\"#frTemp1\");\nvar frWear = document.querySelector(\"#frWear\");\nvar frPressure = document.querySelector(\"#frPressure\");\nvar frDirt = document.querySelector(\"#frDirt\");\nvar frBrake = document.querySelector(\"#frBrake\");\nvar frTemp2 = document.querySelector(\"#frTemp2\");\nvar frTemp3 = document.querySelector(\"#frTemp3\");\nvar rlTemp1 = document.querySelector(\"#rlTemp1\");\nvar rlWear = document.querySelector(\"#rlWear\");\nvar rlPressure = document.querySelector(\"#rlPressure\");\nvar rlDirt = document.querySelector(\"#rlDirt\");\nvar rlBrake = document.querySelector(\"#rlBrake\");\nvar rlTemp2 = document.querySelector(\"#rlTemp2\");\nvar rlTemp3 = document.querySelector(\"#rlTemp3\");\nvar rrTemp1 = document.querySelector(\"#rrTemp1\");\nvar rrWear = document.querySelector(\"#rrWear\");\nvar rrPressure = document.querySelector(\"#rrPressure\");\nvar rrDirt = document.querySelector(\"#rrDirt\");\nvar rrBrake = document.querySelector(\"#rrBrake\");\nvar rrTemp2 = document.querySelector(\"#rrTemp2\");\nvar rrTemp3 = document.querySelector(\"#rrTemp3\");\nlet canvas1 = document.getElementById('chart');\nlet ctx1 = canvas1.getContext('2d');\nlet data = {\nlabels: [],\ndatasets: [\n{ label: 'Input 1', data: [], color: 'red' },\n{ label: 'Input 2', data: [], color: 'green' },\n{ label: 'Input 3', data: [], color: 'gray' },\n]\n};\nfunction drawChart() {\n// clear the canvas\nctx1.clearRect(0, 0, canvas1.width, canvas1.height);\n// draw the datasets\ndata.datasets.forEach((dataset, i) => {\nctx1.beginPath();\nctx1.strokeStyle = dataset.color;\nctx1.lineWidth = 1.5;\ndataset.data.forEach((point, j) => {\nctx1.lineTo(j * 1, canvas1.height - point);\n//ctx1.lineTo(j * 10, point);\n});\nctx1.stroke();\n});\n// draw the labels\nctx1.fillStyle = 'white';\nctx1.fillText(data.labels[data.labels.length - 1], canvas1.width - 50, canvas1.height - 10);\n}\nfor (let i = 0; i < relativeTrs.length; i++) {\nrelativeTds[i] = relativeTrs[i].querySelectorAll(\"td\");\n}\ndocument.querySelector(\"#toggle-settings\").addEventListener( \"click\", (e) => {\naddSettingsListeners();\n} )\nconst canvas = document.getElementById('myCanvas');\nconst ctx = canvas.getContext('2d');\nvar carMain = { x: canvas.width / 2, y: canvas.height / 2, rotation: 0, width: 1.970000*20, length: 4.756699*20 };\nvar cars = [];\nlet canvasWidth, canvasHeight;\nfunction updateCanvasSize(width, height) {\ncanvasWidth = canvas.width = width;\ncanvasHeight = canvas.height = height;\nrequestAnimationFrame(drawCars);\n}\nfunction drawCar(x, y, rotation, width, length, color) {\nctx.save();\nctx.translate(x, y);\nctx.rotate(rotation);\nctx.fillStyle = color;\nctx.fillRect(-width / 2, -length / 2, width, length);\nctx.beginPath();\nctx.moveTo(0, 0);\nif (color == 'red')\nctx.lineTo(0, length / 2);\nelse\nctx.lineTo(0, -length / 2);\nctx.strokeStyle = 'black';\nctx.stroke();\nctx.restore();\n}\nfunction drawCars() {\nctx.clearRect(0, 0, canvas.width, canvas.height);\ndrawCar(carMain.x, carMain.y, carMain.rotation, carMain.width, carMain.length, 'white');\nif ( cars.length > 0 )\nfor (let i = 0; i < cars.length; i++) {\ndrawCar(cars[i].x, cars[i].y, cars[i].rotation, cars[i].width, cars[i].length, 'red');\n}\n}\nfunction printFrame() {\ndrawCars();\n}\nupdateCanvasSize(400,400);\nwindow.addEventListener('resize', updateCanvasSize);\nrequestAnimationFrame(drawCars);\nvar resizableTable = null;\nvar draggableCorner = null;\nlet isDragging = false;\nlet isResizing = false;\nlet isScaling = false;\nlet initialX, initialY, initialWidth, initialHeight, initialScale;\nvar isSettingsOn = false;\nfunction msDwn ( e ) {\ne.preventDefault();\nif (e.target.id == \"draggable-corner\" && e.button == 2) {\nswitch (e.button) {\ncase 0:\nresizableTable = e.target.parentElement;\nisResizing = true;\ninitialWidth = resizableTable.offsetWidth;\ninitialHeight = resizableTable.offsetHeight;\ninitialX = e.clientX;\ninitialY = e.clientY;\nbreak;\ncase 2:\nresizableTable = e.target.parentElement.firstElementChild;\nisScaling = true;\nvar style = window.getComputedStyle(resizableTable);\nvar transform = style.getPropertyValue('transform');\nif (transform != 'none') {\nvar values = transform.split('(')[1].split(')')[0].split(',');\ninitialScale = parseFloat(values[0]);\n} else {\ninitialScale = 1;\n}\ninitialX = e.clientX;\ninitialY = e.clientY;\nbreak;\ndefault:\nconsole.log('Unexpected mouse button clicked.');\n}\n} else {\nresizableTable = e.target;\nwhile (resizableTable.id !== 'resizable-table') {\nresizableTable = resizableTable.parentElement;\n}\nisDragging = true;\ninitialX = e.clientX - resizableTable.offsetLeft;\ninitialY = e.clientY - resizableTable.offsetTop;\n}\n}\nfunction msMv ( e ) {\nif (isScaling) {\nvar movementX = e.clientX - initialX;\nvar newScale = initialScale + movementX / 100;\nresizableTable.style.transform = 'scale(' + newScale + ')';\n} else if (isResizing) {\nconst deltaX = e.clientX - initialX;\nconst deltaY = e.clientY - initialY;\nconst newWidth = Math.max(30, initialWidth + deltaX);\nconst newHeight = Math.max(30, initialHeight + deltaY);\nconst maxX = window.innerWidth - resizableTable.offsetLeft;\nconst maxY = window.innerHeight - resizableTable.offsetTop;\nresizableTable.style.width = `${Math.min(newWidth, maxX)}px`;\nresizableTable.style.height = `${Math.min(newHeight, maxY)}px`;\nif ( resizableTable.className === \"canv\" ) {\nupdateCanvasSize(Math.min(newWidth, maxX), Math.min(newHeight, maxY));\n}\n} else if (isDragging) {\nconst newX = e.clientX - initialX;\nconst newY = e.clientY - initialY;\nconst maxX = window.innerWidth - resizableTable.offsetWidth;\nconst maxY = window.innerHeight - resizableTable.offsetHeight;\nconst clampedX = Math.max(0, Math.min(newX, maxX));\nconst clampedY = Math.max(0, Math.min(newY, maxY));\nresizableTable.style.left = `${clampedX}px`;\nresizableTable.style.top = `${clampedY}px`;\n}\n}\nfunction msUp ( e ) {\nisDragging = false;\nisResizing = false;\nisScaling = false;\n}\nfunction sendPositions () {\nvar firstLeft = -1000;\nvar dataToSend = [9];\nvar count = 0\ndocument.querySelectorAll(\"#resizable-table\").forEach(function (element) {\nvar rect = element.getBoundingClientRect();\nif (firstLeft == -1000) {\nfirstLeft = rect.left;\n}\ndataToSend.push(Math.round(rect.left));\ndataToSend.push(Math.round(rect.top));\nvar resizableTable = element.firstElementChild;\nvar style = window.getComputedStyle(resizableTable);\nvar transform = style.getPropertyValue('transform');\nif (transform != 'none') {\nvar values = transform.split('(')[1].split(')')[0].split(',');\ncount++;\nvar trans = parseFloat(values[0]);\ndataToSend.push(Math.floor(trans));\ndataToSend.push(Math.round((trans-Math.floor(trans))*100).toFixed(0));\n} else {\ndataToSend.push(1);\ndataToSend.push(0);\n}\n});\nvar byteArray = new Uint16Array(dataToSend);\nlet char1 = firstLeft & 0xFF;  // Low byte\nlet char2 = (firstLeft >> 8) & 0xFF;\nvar buff = byteArray.buffer;\nvar viewTemp = new Uint8Array(buff);\nviewTemp[2] = char1;\nviewTemp[3] = char2;\nvar viewCorrected = new Uint16Array(buff);\nsocket.send(viewCorrected.buffer);\n}\nfunction addSettingsListeners () {\nif ( isSettingsOn === true ) {\ndocument.querySelectorAll(\"#resizable-table\").forEach(function (element) {\nelement.removeEventListener(\"mousedown\", msDwn);\nelement.querySelector(\"#draggable-corner\").classList.add('hide');\n//element.classList.remove(\"border\");\n});\ndocument.querySelector(\"#startLight\").classList.add('hide');\ndocument.removeEventListener(\"mousemove\", msMv);\ndocument.removeEventListener(\"mouseup\", msUp);\nisSettingsOn = false;\nsendPositions();\n} else {\ndocument.querySelectorAll(\"#resizable-table\").forEach(function (element) {\nelement.addEventListener(\"mousedown\", msDwn);\nelement.querySelector(\"#draggable-corner\").classList.remove('hide');\n//element.classList.add(\"border\");\n});;\ndocument.querySelector(\"#startLight\").classList.remove('hide');\ndocument.addEventListener(\"mousemove\", msMv);\ndocument.addEventListener(\"mouseup\", msUp);\nisSettingsOn = true;\n}\n}\nfl = document.querySelectorAll(\"#wheels td\")[15]\nfr = document.querySelectorAll(\"#wheels td\")[16];\nrl = document.querySelectorAll(\"#wheels td\")[23];\nrr = document.querySelectorAll(\"#wheels td\")[24];\nsocket.binaryType = \"arraybuffer\";\nsocket.addEventListener('open', (event) => {\n});\nvar delay = 0;\nsocket.addEventListener('message', (event) => {\nif (event.data instanceof ArrayBuffer) {\nlet view = new Uint8Array(event.data);\nconst view1 = new DataView(event.data);\nif (view[0] == 1/*1*/) {\nvar deltaHtml = view1.getFloat32(1, true).toFixed(3)\nif (deltaHtml > 0) {\ndelta.style.color = `rgb(255,0,0)`;\n} else {\ndelta.style.color = `rgb(0,255,0)`;\n}\ndeltaHtml = deltaHtml == -1000 ? \"-\" : deltaHtml\ndelta.innerHTML = deltaHtml;\ncarMain.x = -view1.getFloat32(1 + 4, true)+500;\ncarMain.y = -view1.getFloat32(1 + 8, true)+500;\ncarMain.rotation = view1.getFloat32(1 + 12, true);\ncarMain.width = view1.getFloat32(1 + 16, true)*20;\ncarMain.length = view1.getFloat32(1 + 20, true)*20;\nvar bytes = 21\nwhile ( true ) {\ncars.push({\nx: -view1.getFloat32(bytes + 4, true)+500,\ny: -view1.getFloat32(bytes + 8, true)+500,\nrotation: view1.getFloat32(bytes + 12, true),\nwidth: view1.getFloat32(bytes + 16, true)*20,\nlength: view1.getFloat32(bytes + 20, true)*20\n});\nbytes += 20\nif ( bytes + 4 == view1.byteLength ) {\nbreak;\n}\n}\nfunction calculateDistance(carMain, car2) {\nvar dx = car2.x - carMain.x;\nvar dy = car2.y - carMain.y;\nvar distanceCenter = Math.sqrt(dx * dx + dy * dy);\ndistanceCenter *=20;\nreturn distanceCenter;\n}\nfunction calculateSecondCarPosition(carMain, distance, angle) {\nconst newX = carMain.x - distance * Math.cos(angle);\nconst newY = carMain.y + distance * Math.sin(angle);\nreturn { x: newX, y: newY };\n}\nfunction calculateAngle(carMain, car2) {\nreturn Math.atan2(car2.y - carMain.y, car2.x - carMain.x);\n}\nvar dist = 0;\nif ( cars.length > 0 )\nfor (let i = 0; i < cars.length; i++) {\nca";
char* responz2 = "rMainTemp = { ...carMain };\nconst angleBetweenCars = calculateAngle(carMainTemp, cars[i]);\ndistance = calculateDistance(carMainTemp, cars[i])\ndist = distance\nvar angle = angleBetweenCars;\nlet equivalentAngle1 = ((angle * (180 / Math.PI)) + (carMainTemp.rotation * (180 / Math.PI)))  % 360;\nif (equivalentAngle1 < 0) {\nequivalentAngle1 += 360;\n}\nangle = equivalentAngle1 - 180;\nangle = (angle * Math.PI) / 180\ncarMainTemp.x = canvas.width / 2;\ncarMainTemp.y = canvas.height / 2;\nvar pso = calculateSecondCarPosition(carMainTemp, distance, angle);\ncars[i].x = pso.x;\ncars[i].y = pso.y;\ncarMainTemp.rotation = carMainTemp.rotation * (180 / Math.PI);\ncars[i].rotation = cars[i].rotation * (180 / Math.PI);\ncarMainTemp.rotation = 360 - carMainTemp.rotation;\nlet sum = carMainTemp.rotation + cars[i].rotation;\nlet equivalentAngle = sum % 360;\nif (equivalentAngle < 0) {\nequivalentAngle += 360;\n}\ncars[i].rotation = equivalentAngle - 180;\ncarMainTemp.rotation = (360 * Math.PI) / 180;\ncars[i].rotation = (cars[i].rotation * Math.PI) / 180;\n}\ncarMain.x = canvas.width / 2;\ncarMain.y = canvas.height / 2;\ncarMain.rotation = (360 * Math.PI) / 180;\nprintFrame();\ncars.length = 0;\nreturn;\n}\nif (view[0] == 2) {\nvar offset = 1;\nflWear.innerHTML = (view1.getFloat32(offset, true)*100).toFixed(2);//fl\noffset += 4;\nfrWear.innerHTML = (view1.getFloat32(offset, true)*100).toFixed(2);//fr\noffset += 4;\nrlWear.innerHTML = (view1.getFloat32(offset, true)*100).toFixed(2);//rl\noffset += 4;\nrrWear.innerHTML = (view1.getFloat32(offset, true)*100).toFixed(2);//rr\noffset += 4;\nflPressure.innerHTML = view1.getFloat32(offset, true).toFixed(1);\noffset += 4;\nfrPressure.innerHTML = view1.getFloat32(offset, true).toFixed(1);\noffset += 4;\nrlPressure.innerHTML = view1.getFloat32(offset, true).toFixed(1);\noffset += 4;\nrrPressure.innerHTML = view1.getFloat32(offset, true).toFixed(1);\noffset += 4;\nflDirt.innerHTML = (view1.getFloat32(offset, true)*100).toFixed(3);\noffset += 4;\nfrDirt.innerHTML = (view1.getFloat32(offset, true)*100).toFixed(3);\noffset += 4;\nrlDirt.innerHTML = (view1.getFloat32(offset, true)*100).toFixed(3);\noffset += 4;\nrrDirt.innerHTML = (view1.getFloat32(offset, true)*100).toFixed(3);\noffset += 4;\nvar flBrakeTemp = view1.getFloat32(offset, true).toFixed(0);\nflBrake.innerHTML = flBrakeTemp;\noffset += 4;\nvar brakeTempOptFl = view1.getFloat32(offset, true);\noffset += 4;\nvar brakeTempCldFl = view1.getFloat32(offset, true);\noffset += 4;\nvar brakeTempHotFl = view1.getFloat32(offset, true);\noffset += 4;\nflBrake.parentElement.parentElement.style.backgroundColor = getTemperatureColor(flBrakeTemp, brakeTempCldFl, brakeTempOptFl, brakeTempHotFl);\nvar frBrakeTemp = view1.getFloat32(offset, true).toFixed(0);\nfrBrake.innerHTML = frBrakeTemp;\noffset += 4;\nvar brakeTempOptFr = view1.getFloat32(offset, true);\noffset += 4;\nvar brakeTempCldFr = view1.getFloat32(offset, true);\noffset += 4;\nvar brakeTempHotFr = view1.getFloat32(offset, true);\noffset += 4;\nfrBrake.parentElement.parentElement.style.backgroundColor = getTemperatureColor(frBrakeTemp, brakeTempCldFr, brakeTempOptFr, brakeTempHotFr);\nvar rlBrakeTemp = view1.getFloat32(offset, true).toFixed(0);\nrlBrake.innerHTML = rlBrakeTemp;\noffset += 4;\nvar brakeTempOptRl = view1.getFloat32(offset, true);\noffset += 4;\nvar brakeTempCldRl = view1.getFloat32(offset, true);\noffset += 4;\nvar brakeTempHotRl = view1.getFloat32(offset, true);\noffset += 4;\nrlBrake.parentElement.parentElement.style.backgroundColor = getTemperatureColor(rlBrakeTemp, brakeTempCldRl, brakeTempOptRl, brakeTempHotRl);\nvar rrBrakeTemp = view1.getFloat32(offset, true).toFixed(0);\nrrBrake.innerHTML = rrBrakeTemp;\noffset += 4;\nvar brakeTempOptRr = view1.getFloat32(offset, true);\noffset += 4;\nvar brakeTempCldRr = view1.getFloat32(offset, true);\noffset += 4;\nvar brakeTempHotRr = view1.getFloat32(offset, true);\noffset += 4;\nrrBrake.parentElement.parentElement.style.backgroundColor = getTemperatureColor(rrBrakeTemp, brakeTempCldRr, brakeTempOptRr, brakeTempHotRr);\nreturn;\n}\nif (view[0] == 3) {\nvar offset = 1;\nvar flTemp1Temp = view1.getFloat32(offset, true).toFixed(0);\nflTemp1.innerHTML = flTemp1Temp;\noffset += 4;\nvar flTemp2Temp = view1.getFloat32(offset, true).toFixed(0);\nflTemp2.innerHTML = flTemp2Temp;\noffset += 4;\nvar flTemp3Temp = view1.getFloat32(offset, true).toFixed(0);\nflTemp3.innerHTML = flTemp3Temp;\noffset += 4;\nvar tireTempOptFl = view1.getFloat32(offset, true);\noffset += 4;\nvar tireTempCldFl = view1.getFloat32(offset, true);\noffset += 4;\nvar tireTempHotFl = view1.getFloat32(offset, true);\noffset += 4;\nflTemp1.parentElement.parentElement.style.backgroundColor = getTemperatureColor(flTemp1Temp, tireTempCldFl, tireTempOptFl, tireTempHotFl);\nflTemp2.parentElement.parentElement.style.backgroundColor = getTemperatureColor(flTemp2Temp, tireTempCldFl, tireTempOptFl, tireTempHotFl);\nflTemp3.parentElement.parentElement.style.backgroundColor = getTemperatureColor(flTemp3Temp, tireTempCldFl, tireTempOptFl, tireTempHotFl);\nvar frTemp1Temp = view1.getFloat32(offset, true).toFixed(0);\nfrTemp1.innerHTML = frTemp1Temp;\noffset += 4;\nvar frTemp2Temp = view1.getFloat32(offset, true).toFixed(0);\nfrTemp2.innerHTML = frTemp2Temp;\noffset += 4;\nvar frTemp3Temp = view1.getFloat32(offset, true).toFixed(0);\nfrTemp3.innerHTML = frTemp3Temp;\noffset += 4;\nvar tireTempOptFr = view1.getFloat32(offset, true);\noffset += 4;\nvar tireTempCldFr = view1.getFloat32(offset, true);\noffset += 4;\nvar tireTempHotFr = view1.getFloat32(offset, true);\noffset += 4;\nfrTemp1.parentElement.parentElement.style.backgroundColor = getTemperatureColor(frTemp1Temp, tireTempCldFr, tireTempOptFr, tireTempHotFr);\nfrTemp2.parentElement.parentElement.style.backgroundColor = getTemperatureColor(frTemp2Temp, tireTempCldFr, tireTempOptFr, tireTempHotFr);\nfrTemp3.parentElement.parentElement.style.backgroundColor = getTemperatureColor(frTemp3Temp, tireTempCldFr, tireTempOptFr, tireTempHotFr);\nvar rlTemp1Temp = view1.getFloat32(offset, true).toFixed(0);\nrlTemp1.innerHTML = rlTemp1Temp;\noffset += 4;\nvar rlTemp2Temp = view1.getFloat32(offset, true).toFixed(0);\nrlTemp2.innerHTML = rlTemp2Temp;\noffset += 4;\nvar rlTemp3Temp = view1.getFloat32(offset, true).toFixed(0);\nrlTemp3.innerHTML = rlTemp3Temp;\noffset += 4;\nvar tireTempOptRl = view1.getFloat32(offset, true);\noffset += 4;\nvar tireTempCldRl = view1.getFloat32(offset, true);\noffset += 4;\nvar tireTempHotFRl = view1.getFloat32(offset, true);\noffset += 4;\nrlTemp1.parentElement.parentElement.style.backgroundColor = getTemperatureColor(rlTemp1Temp, tireTempCldRl, tireTempOptRl, tireTempHotFRl);\nrlTemp2.parentElement.parentElement.style.backgroundColor = getTemperatureColor(rlTemp2Temp, tireTempCldRl, tireTempOptRl, tireTempHotFRl);\nrlTemp3.parentElement.parentElement.style.backgroundColor = getTemperatureColor(rlTemp3Temp, tireTempCldRl, tireTempOptRl, tireTempHotFRl);\nvar rrTemp1Temp = view1.getFloat32(offset, true).toFixed(0);\nrrTemp1.innerHTML = rrTemp1Temp;\noffset += 4;\nvar rrTemp2Temp = view1.getFloat32(offset, true).toFixed(0);\nrrTemp2.innerHTML = rrTemp2Temp;\noffset += 4;\nvar rrTemp3Temp = view1.getFloat32(offset, true).toFixed(0);\nrrTemp3.innerHTML = rrTemp3Temp;\noffset += 4;\nvar tireTempOptRr = view1.getFloat32(offset, true);\noffset += 4;\nvar tireTempCldRr = view1.getFloat32(offset, true);\noffset += 4;\nvar tireTempHotFRr = view1.getFloat32(offset, true);\noffset += 4;\nrrTemp1.parentElement.parentElement.style.backgroundColor = getTemperatureColor(rrTemp1Temp, tireTempCldRr, tireTempOptRr, tireTempHotFRr);\nrrTemp2.parentElement.parentElement.style.backgroundColor = getTemperatureColor(rrTemp2Temp, tireTempCldRr, tireTempOptRr, tireTempHotFRr);\nrrTemp3.parentElement.parentElement.style.backgroundColor = getTemperatureColor(rrTemp3Temp, tireTempCldRr, tireTempOptRr, tireTempHotFRr);\n/*var inputThrottle = (view1.getFloat32(offset, true)*100).toFixed(2);\noffset += 4;\nvar inputBrake = (view1.getFloat32(offset, true)*100).toFixed(2);\noffset += 4;\nvar inputThrottleRaw = view1.getFloat32(offset, true)*100;\noffset += 4;\nvar inputBrakeRaw = view1.getFloat32(offset, true)*100;\nif (inputThrottleRaw < 1 && inputThrottleRaw > 0) {\ninputThrottleRaw = 1;\n}\nif (inputBrakeRaw < 1 && inputBrakeRaw > 0) {\ninputBrakeRaw = 1;\n}\ninputsTds[0].innerHTML = inputThrottle;\ninputsTds[1].innerHTML = inputBrake;\ninputsTds[2].innerHTML = inputThrottleRaw.toFixed(1);\ninputsTds[3].innerHTML = inputBrakeRaw.toFixed(1);*/\nreturn;\n}\nif ( view[0] == 4) {\nvar ratrep;\nvar offset  = 1;\nvar fuelLeft = view1.getFloat32(offset, true);\noffset += 4;\nfuelMonitorTds[5].innerHTML = fuelLeft.toFixed(2);\nvar fuelForRace = view1.getFloat32(offset, true);\noffset += 4;\nfuelMonitorTds[4].innerHTML = fuelForRace;\n//try {\nrelativeTds[5][1].innerHTML = loadedRat[view1.getInt32(offset, true)].Fullname;\nratrep = loadedRat[view1.getInt32(offset, true)].Rating + \"/\" + loadedRat[view1.getInt32(offset, true)].Reputation;\noffset += 4;\nrelativeTds[5][0].innerHTML = view1.getInt32(offset, true);\noffset += 4;\nrelativeTds[5][2].innerHTML = ratrep;\nif ( view1.getInt32(offset, true) != 0 ) {\nrelativeTds[4][1].innerHTML = loadedRat[view1.getInt32(offset, true)].Fullname;\nratrep = loadedRat[view1.getInt32(offset, true)].Rating + \"/\" + loadedRat[view1.getInt32(offset, true)].Reputation;\noffset += 4;\nrelativeTds[4][0].innerHTML = view1.getInt8(offset, true);\noffset += 1;\nrelativeTds[4][2].innerHTML = ratrep;\nrelativeTds[4][3].innerHTML = view1.getFloat32(offset, true)>-999&&view1.getFloat32(offset, true)<999?view1.getFloat32(offset, true).toFixed(3):(view1.getFloat32(offset, true)/1000).toFixed(0);\noffset += 4;\n} else {\noffset += 9;\n}\nif ( view1.getInt32(offset, true) != 0 ) {\nrelativeTds[3][1].innerHTML = loadedRat[view1.getInt32(offset, true)].Fullname;\nratrep = loadedRat[view1.getInt32(offset, true)].Rating + \"/\" + loadedRat[view1.getInt32(offset, true)].Reputation;\noffset += 4;\nrelativeTds[3][0].innerHTML = view1.getInt8(offset, true);\noffset += 1;\nrelativeTds[3][2].innerHTML = ratrep;\nrelativeTds[3][3].innerHTML = view1.getFloat32(offset, true)>-999&&view1.getFloat32(offset, true)<999?view1.getFloat32(offset, true).toFixed(3):(view1.getFloat32(offset, true)/1000).toFixed(0);\noffset += 4;\n} else {\noffset += 9;\n}\nif ( view1.getInt32(offset, true) != 0 ) {\nrelativeTds[2][1].innerHTML = loadedRat[view1.getInt32(offset, true)].Fullname;\nratrep = loadedRat[view1.getInt32(offset, true)].Rating + \"/\" + loadedRat[view1.getInt32(offset, true)].Reputation;\noffset += 4;\nrelativeTds[2][0].innerHTML = view1.getInt8(offset, true);\noffset += 1;\nrelativeTds[2][2].innerHTML = ratrep;\nrelativeTds[2][3].innerHTML = view1.getFloat32(offset, true)>-999&&view1.getFloat32(offset, true)<999?view1.getFloat32(offset, true).toFixed(3):(view1.getFloat32(offset, true)/1000).toFixed(0);\noffset += 4;\n} else {\noffset += 9;\n}\nif ( view1.getInt32(offset, true) != 0 ) {\nrelativeTds[1][1].innerHTML = loadedRat[view1.getInt32(offset, true)].Fullname;\nratrep = loadedRat[view1.getInt32(offset, true)].Rating + \"/\" + loadedRat[view1.getInt32(offset, true)].Reputation;\noffset += 4;\nrelativeTds[1][0].innerHTML = view1.getInt8(offset, true);\noffset += 1;\nrelativeTds[1][2].innerHTML = ratrep;\nrelativeTds[1][3].innerHTML = view1.getFloat32(offset, true)>-999&&view1.getFloat32(offset, true)<999?view1.getFloat32(offset, true).toFixed(3):(view1.getFloat32(offset, true)/1000).toFixed(0);\noffset += 4;\n} else {\noffset += 9;\n}\nif ( view1.getInt32(offset, true) != 0 ) {\nrelativeTds[0][1].innerHTML = loadedRat[view1.getInt32(offset, true)].Fullname;\nratrep = loadedRat[view1.getInt32(offset, true)].Rating + \"/\" + loadedRat[view1.getInt32(offset, true)].Reputation;\noffset += 4;\nrelativeTds[0][0].innerHTML = view1.getInt8(offset, true);\noffset += 1;\nrelativeTds[0][2].innerHTML = ratrep;\nrelativeTds[0][3].innerHTML = view1.getFloat32(offset, true)>-999&&view1.getFloat32(offset, true)<999?view1.getFloa";
char* responz3 = "t32(offset, true).toFixed(3):(view1.getFloat32(offset, true)/1000).toFixed(0);\noffset += 4;\n} else {\noffset += 9;\n}\nif ( view1.getInt32(offset, true) != 0 ) {\nrelativeTds[6][1].innerHTML = loadedRat[view1.getInt32(offset, true)].Fullname;\nratrep = loadedRat[view1.getInt32(offset, true)].Rating + \"/\" + loadedRat[view1.getInt32(offset, true)].Reputation;\noffset += 4;\nrelativeTds[6][0].innerHTML = view1.getInt8(offset, true);\noffset += 1;\nrelativeTds[6][2].innerHTML = ratrep;\nrelativeTds[6][3].innerHTML = view1.getFloat32(offset, true)>-999&&view1.getFloat32(offset, true)<999?view1.getFloat32(offset, true).toFixed(3):(view1.getFloat32(offset, true)/1000).toFixed(0);\noffset += 4;\n} else {\noffset += 9;\n}\nif ( view1.getInt32(offset, true) != 0 ) {\nrelativeTds[7][1].innerHTML = loadedRat[view1.getInt32(offset, true)].Fullname;\nratrep = loadedRat[view1.getInt32(offset, true)].Rating + \"/\" + loadedRat[view1.getInt32(offset, true)].Reputation;\noffset += 4;\nrelativeTds[7][0].innerHTML = view1.getInt8(offset, true);\noffset += 1;\nrelativeTds[7][2].innerHTML = ratrep;\nrelativeTds[7][3].innerHTML = view1.getFloat32(offset, true)>-999&&view1.getFloat32(offset, true)<999?view1.getFloat32(offset, true).toFixed(3):(view1.getFloat32(offset, true)/1000).toFixed(0);\noffset += 4;\n} else {\noffset += 9;\n}\nif ( view1.getInt32(offset, true) != 0 ) {\nrelativeTds[8][1].innerHTML = loadedRat[view1.getInt32(offset, true)].Fullname;\nratrep = loadedRat[view1.getInt32(offset, true)].Rating + \"/\" + loadedRat[view1.getInt32(offset, true)].Reputation;\noffset += 4;\nrelativeTds[8][0].innerHTML = view1.getInt8(offset, true);\noffset += 1;\nrelativeTds[8][2].innerHTML = ratrep;\nrelativeTds[8][3].innerHTML = view1.getFloat32(offset, true)>-999&&view1.getFloat32(offset, true)<999?view1.getFloat32(offset, true).toFixed(3):(view1.getFloat32(offset, true)/1000).toFixed(0);\noffset += 4;\n} else {\noffset += 9;\n}\nif ( view1.getInt32(offset, true) != 0 ) {\nrelativeTds[9][1].innerHTML = loadedRat[view1.getInt32(offset, true)].Fullname;\nratrep = loadedRat[view1.getInt32(offset, true)].Rating + \"/\" + loadedRat[view1.getInt32(offset, true)].Reputation;\noffset += 4;\nrelativeTds[9][0].innerHTML = view1.getInt8(offset, true);\noffset += 1;\nrelativeTds[9][2].innerHTML = ratrep;\nrelativeTds[9][3].innerHTML = view1.getFloat32(offset, true)>-999&&view1.getFloat32(offset, true)<999?view1.getFloat32(offset, true).toFixed(3):(view1.getFloat32(offset, true)/1000).toFixed(0);\noffset += 4;\n} else {\noffset += 9;\n}\nif ( view1.getInt32(offset, true) != 0 ) {\nrelativeTds[10][1].innerHTML = loadedRat[view1.getInt32(offset, true)].Fullname;\nratrep = loadedRat[view1.getInt32(offset, true)].Rating + \"/\" + loadedRat[view1.getInt32(offset, true)].Reputation;\noffset += 4;\nrelativeTds[10][0].innerHTML = view1.getInt8(offset, true);\noffset += 1;\nrelativeTds[10][2].innerHTML = ratrep;\nrelativeTds[10][3].innerHTML = view1.getFloat32(offset, true)>-999&&view1.getFloat32(offset, true)<999?view1.getFloat32(offset, true).toFixed(3):(view1.getFloat32(offset, true)/1000).toFixed(0);\noffset += 4;\n} else {\noffset += 9;\n}\n//} catch (err) {}\nreturn;\n}\nif ( view[0] == 5) {\nlet decoder = new TextDecoder('utf-8');\nlet str = decoder.decode(new DataView(event.data, 1, view1.byteLength-2));\nlet arr = str.split(',');\nlet obj = {\nUserId: arr[0],\nFullname: arr[1],\nRating: arr[2],\nReputation: arr[3]\n};\nloadedRat[arr[0]] = obj;\nreturn;\n}\nif ( view[0] == 6 ) {\nvar offset = 1;\nvar lastLapHtml = view1.getFloat32(offset, true);\nif (lastLapHtml == -1) {\nlastLap.innerHTML = \"-:--.---\";\n} else {\nvar res = Math.floor(lastLapHtml / 60);\nif ( res >= 1 ) {\nlastLap.innerHTML = res+\":\"+(lastLapHtml - 60 * res).toFixed(3).padStart(6, '0');;\n} else {\nlastLap.innerHTML = lastLapHtml.toFixed(3).padStart(6, '0');\n}\n}\nif ( view1.byteLength < 6 ) {\nreturn;\n}\noffset += 4;\nvar bestLapHtml= view1.getFloat32(offset, true);\nif (bestLapHtml == 9999 || bestLapHtml == -1 ) {\nbestLap.innerHTML = \"-:--.---\";\n} else {\nvar res = Math.floor(bestLapHtml / 60);\nif ( res >= 1 ) {\nbestLap.innerHTML = res+\":\"+(bestLapHtml - 60 * res).toFixed(3).padStart(6, '0');;\n} else {\nbestLap.innerHTML = bestLapHtml.toFixed(3).padStart(6, '0');\n}\n}\noffset += 4;\nvar bestLapLeadHtml = view1.getFloat32(offset, true);\nif (bestLapLeadHtml == -1) {\nbestLapLead.innerHTML = \"-:--.---\";\n} else {\nvar res = Math.floor(bestLapLeadHtml / 60);\nif ( res >= 1 ) {\nbestLapLead.innerHTML = res+\":\"+(bestLapLeadHtml - 60 * res).toFixed(3).padStart(6, '0');;\n} else {\nbestLapLead.innerHTML = bestLapLeadHtml.toFixed(3).padStart(6, '0');\n}\n}\nif ( view1.byteLength < 14 ) {\nreturn;\n}\noffset += 4;\nvar timeHtml = view1.getFloat32(offset, true);\nif (timeHtml == 9999) {\nfuelMonitorTds[3].innerHTML = \"-:--.---\";\n} else {\nvar res = Math.floor(timeHtml / 60);\nif ( res >= 1 ) {\nfuelMonitorTds[3].innerHTML = res+\":\"+(timeHtml - 60 * res).toFixed(3).padStart(6, '0');\n} else {\nfuelMonitorTds[3].innerHTML = timeHtml.toFixed(3).padStart(6, '0');\n}\n}\nif ( view1.byteLength < 16 ) {\nreturn;\n}\noffset += 4;\nvar fuelHtml = view1.getFloat32(offset, true);\nfuelHtml = fuelHtml == 9999 ? \"-\" : fuelHtml.toFixed(2);\nfuelMonitorTds[2].innerHTML = fuelHtml;\noffset += 4;\nreturn;\n}\nif ( view[0] == 7 ) {\nstartLight.classList.remove('hide');\nswitch (view1.getUint32(1, true)) {\ncase 0:\nbreak;\ncase 1:\nstartLightDivs[0].classList.remove('off');\nstartLightDivs[0].classList.add('red');\nbreak;\ncase 2:\nstartLightDivs[1].classList.remove('off');\nstartLightDivs[1].classList.add('red');\nbreak;\ncase 3:\nstartLightDivs[2].classList.remove('off');\nstartLightDivs[2].classList.add('red');\nbreak;\ncase 4:\nstartLightDivs[3].classList.remove('off');\nstartLightDivs[3].classList.add('red');\nbreak;\ncase 5:\nstartLightDivs[4].classList.remove('off');\nstartLightDivs[4].classList.add('red');\nbreak;\ncase 6:\nstartLightDivs[0].classList.add('off');\nstartLightDivs[0].classList.remove('red');\nstartLightDivs[1].classList.add('off');\nstartLightDivs[1].classList.remove('red');\nstartLightDivs[2].classList.add('off');\nstartLightDivs[2].classList.remove('red');\nstartLightDivs[3].classList.add('off');\nstartLightDivs[3].classList.remove('red');\nstartLightDivs[4].classList.add('off');\nstartLightDivs[4].classList.remove('red');\nstartLightDivs[5].classList.add('green');\nstartLightDivs[5].classList.remove('off');\nsetTimeout(function() {\nstartLight.classList.add('hide');\n}, 3000);\nbreak;\n}\nreturn;\n}\nif ( view[0] == 8 ) {\nlet id = view1.getUint32(1, true);\nsetTimeout(function() {\ntry {\nlet xhr = new XMLHttpRequest();\nxhr.open(\"GET\", 'https://game.raceroom.com/multiplayer-rating/user/'+id+'.json', true);\nxhr.onreadystatechange = function () {\nif (xhr.readyState == 4 && xhr.status == 200) {\nlet jsn = JSON.parse(xhr.responseText);\njsn.Rating = Math.floor(jsn.Rating);\njsn.Reputation = Math.floor(jsn.Reputation);\nlet parts = jsn.Fullname.split(' ');\nif (parts.length === 2) {\njsn.Fullname = parts[0].charAt(0) + '. ' + parts[1];\n}\njsn.Fullname = jsn.Fullname.substring(0, 15);\nlet resultRat = \"1\"+jsn.UserId+\",\"+jsn.Fullname+\",\"+jsn.Rating+\",\"+jsn.Reputation;\nloadedRat[jsn.UserId] = {\n\"UserId\" : jsn.UserId,\n\"Fullname\" : jsn.Fullname,\n\"Rating\" : jsn.Rating,\n\"Reputation\" : jsn.Reputation,\n};\nsocket.send(resultRat);\n} else {\nloadedRat[id] = {\n\"UserId\" : id,\n\"Fullname\" : \"None\",\n\"Rating\" : 0,\n\"Reputation\" : 0,\n};\n}\n}\nxhr.send();\n} catch (err) {\nloadedRat[id] = {\n\"UserId\" : id,\n\"Fullname\" : \"None\",\n\"Rating\" : 0,\n\"Reputation\" : 0,\n};\n}\n}, delay);\ndelay += 100;\nreturn;\n}\nif (view[0] == 9) {\nif ( view1.byteLength < 3 ) {\ndocument.querySelector(\"body\").classList.remove('hide');\naddSettingsListeners();\n} else {\nvar ofst = 0;\nvar w,h = 0;\ndocument.querySelectorAll(\"#resizable-table\").forEach(function (element) {\nvar style = \"\";\nstyle += \"left: \"+view1.getInt16(1 + ofst, true)+\"px; \";\nofst += 2\nstyle += \"top: \"+view1.getInt16(1 + ofst, true)+\"px; \";\nofst += 2\n//style += \"width: \"+view1.getInt16(1 + ofst, true)+\"px; \";\n//w = view1.getInt16(1 + ofst, true);\n//ofst += 2\n//style += \"height: \"+view1.getInt16(1 + ofst, true)+\"px;\";\n//h = view1.getInt16(1 + ofst, true);\n//ofst += 2\nvar d = view1.getInt16(1 + ofst, true);\nofst += 2\nvar f = view1.getInt16(1 + ofst, true);\nofst += 2\nelement.firstElementChild.style.cssText = \"transform: scale(\"+d+\".\"+f+\");\"\nelement.style.cssText = style;\n});\ndocument.querySelector(\"body\").classList.remove('hide');\n}\nreturn;\n}\nif (view[0] == 10) {\nvar offset = 1;\nvar inputThrottle = (view1.getFloat32(offset, true)*100).toFixed(2);\nvar inputThrottleGraph = view1.getFloat32(offset, true);\noffset += 4;\nvar inputBrake = (view1.getFloat32(offset, true)*100).toFixed(2);\nvar inputBrakeGraph = view1.getFloat32(offset, true);\noffset += 4;\nvar inputThrottleRaw = view1.getFloat32(offset, true)*100;\nvar inputThrottleRawGraph = view1.getFloat32(offset, true);\noffset += 4;\nvar inputBrakeRaw = view1.getFloat32(offset, true)*100;\ninputsTds[0].innerHTML = inputThrottle;\ninputsTds[1].innerHTML = inputBrake;\ninputsTds[2].innerHTML = inputThrottleRaw < 1 && inputThrottleRaw > 0 ? 1 : inputThrottleRaw.toFixed(1);\ninputsTds[3].innerHTML = inputBrakeRaw < 1 && inputBrakeRaw > 0 ? 1 : inputBrakeRaw.toFixed(1);\ndata.labels.push(new Date().toLocaleTimeString());\ndata.datasets[0].data.push(inputBrakeGraph * canvas1.height);\ndata.datasets[1].data.push(inputThrottleGraph * canvas1.height);\ndata.datasets[2].data.push(inputThrottleRawGraph * canvas1.height);\nif (data.labels.length > canvas1.width / 1) {\ndata.labels.shift();\ndata.datasets.forEach(dataset => dataset.data.shift());\n}\ndrawChart();\nreturn;\n}\n} else {\nconsole.log(\"nonbin\");\nconsole.log(event.data);\n}\n});\nsocket.addEventListener('close', (event) => { console.log(`Server closed connection: ${event.code} ${event.reason}`); });\nsocket.addEventListener('error', (event) => { console.error('WebSocket error:', event); });\n});\n</script>\n<style type=\"text/css\">\nbody {\nmargin: 0;\noverflow: hidden;\nuser-select: none;\n}\n.hide {\ndisplay: none;\n}\n.border {\nborder: 1px solid #ccc;\n}\n#resizable-table {\nposition: absolute;\nwidth: 1px;\nheight: 1px;\n/* overflow: hidden; */\n}\ntable {\ntable-layout: fixed;\n}\nth,\ntd {\npadding: 0px;\nborder: 1px solid #ccc;\nwidth: 1px;\nwhite-space: nowrap;\n}\n#draggable-corner {\nposition: absolute;\nwidth: 15px;\nheight: 15px;\ntop: 0;\nleft: 0;\nbackground-color: #3498db;\n}\n.tg {\nborder-collapse: collapse;\nborder-spacing: 0;\n}\n.tg td {\nborder-color: black;\nborder-style: solid;\nborder-width: 1px;\nfont-family: Arial, sans-serif;\nfont-size: 14px;\noverflow: hidden;\npadding: 10px 5px;\nword-break: normal;\n}\n.tg th {\nborder-color: black;\nborder-style: solid;\nborder-width: 1px;\nfont-family: Arial, sans-serif;\nfont-size: 14px;\nfont-weight: normal;\noverflow: hidden;\npadding: 10px 5px;\nword-break: normal;\n}\n.tg .tg-11kk {\nbackground-color: #656565;\nborder-color: #f8a102;\ncolor: #ffffff;\nfont-size: 36px;\ntext-align: center;\nvertical-align: middle\n}\n.tg .tg-agb7 {\nbackground-color: #fd6864;\nborder-color: #f8a102;\ncolor: #ffffff;\nfont-size: 36px;\ntext-align: center;\nvertical-align: middle\n}\n.tg .tg-2uwx {\nbackground-color: #343434;\nborder-color: #f8a102;\ncolor: #ffffff;\nfont-size: 16px;\nfont-weight: bold;\ntext-align: center;\nvertical-align: middle\n}\n.tg .tg-6wkr {\nbackground-color: #656565;\nborder-color: #f8a102;\ncolor: #fd6864;\nfont-size: 18px;\nfont-weight: bold;\ntext-align: center;\nvertical-align: middle\n}\n.tg .tg-vr5q {\nbackground-color: #656565;\nborder-color: #f8a102;\ncolor: #67fd9a;\nfont-size: 18px;\nfont-weight: bold;\ntext-align: center;\nvertical-align: middle\n}\n.tg .tg-ivzj {\nbackground-color: #656565;\nborder-color: #9b9b9b;\ncolor: #ffffff;\ntext-align: center;\nvertical-align: middle\n}\n.tg .tg-a0w5 {\nbackground-co";
char* responz4 = "lor: #656565;\ncolor: #ffffff;\ntext-align: center;\nvertical-align: middle\n}\n.tg .tg-be88 {\nbackground-color: #656565;\nborder-color: inherit;\ncolor: #ffffff;\nfont-size: 36px;\ntext-align: center;\nvertical-align: middle\n}\n.tg .tg-wqw7 {\nbackground-color: #656565;\nborder-color: inherit;\ncolor: #ffffff;\nfont-size: 24px;\ntext-align: center;\nvertical-align: middle\n}\n.tg .tg-yeut {\nbackground-color: #656565;\nborder-color: inherit;\ncolor: #ffffff;\nfont-weight: bold;\ntext-align: center;\nvertical-align: middle\n}\n.tg .tg-a0w51{\nbackground-color:#656565;\ncolor:#ffffff;\ntext-align:center;\nvertical-align:middle;\nheight: 5px;\n}\n.tg .tg-xtf7{background-color:#656565;border-color:#000000;color:#ffffff;font-weight:bold;text-align:center;vertical-align:middle}\n.tg .tg-11ac{background-color:#656565;border-color:#000000;color:#ffffff;font-size:28px;font-weight:bold;text-align:center;\nvertical-align:middle}\n.outer-block {\ndisplay: flex;\nflex-direction: column;\njustify-content: center;\nalign-items: center;\nfont-size: 26px;\nfont-weight: bold;\ncolor: white;\ntext-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;\n}\n.scaler {\nwhite-space: nowrap;\ndisplay: flex;\nflex-direction: column;\njustify-content: center;\nalign-items: center;\nfont-size: 26px;\nfont-weight: bold;\ncolor: white;\ntext-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;\n}\n#toggle-settings {\nposition: absolute;\nwidth: 15px;\nheight: 15px;\ntop: 0;\nright: 0;\nbackground-color: rgba(255, 255, 255, 0);\n}\n.over {\ndisplay: grid;\ngrid-template-columns: repeat(2, 1fr);\ngrid-template-rows: repeat(5, 1fr);\njustify-items: center;\nalign-items: center;\nposition: relative;\ngrid-row-gap: 7px;\ngrid-column-gap: 5px;\n}\n.container {\ntop: 500px;\ndisplay: flex;\njustify-content: center;\nalign-items: center;\nheight: 300px;\nposition: relative;\n}\n.div {\nwidth: 100px;\nheight: 300px;\nbackground-color: blue;\nborder: 2px solid black;\n}\n.div:first-child {\nborder-top-left-radius: 10px;\nborder-bottom-left-radius: 10px;\n}\n.div:last-child {\nborder-top-right-radius: 10px;\nborder-bottom-right-radius: 10px;\n}\n.content {\nposition: relative;\ntop: 10px;\nleft: calc(23%);\ncolor: white;\nfont-size: 40px;\ntext-shadow: -2px 1px black, 0 2px black, 2px 0 black, 0 -2px black;\n}\n.data {\ndisplay: inline;\n}\n.sign {\ndisplay: inline;\n}\n.big-text {\nposition: absolute;\ntop: calc(56%);\nleft: calc(50%);\ncolor: white;\nfont-size: 90px;\ntransform: translate(-50%, -50%);\ntext-shadow: -2px 0 black, 0 2px black, 2px 0 black, 0 -2px black;\n}\n.upper-text {\ntext-wrap: nowrap;\nposition: absolute;\ntop: calc(24%);\nleft: calc(50%);\ncolor: white;\nfont-size: 35px;\ntransform: translateX(-50%);\ntext-shadow: -2px 0 black, 0 2px black, 2px 0 black, 0 -2px black;\n}\n.under-text {\nposition: absolute;\ntop: calc(77%);\nleft: calc(50%);\ncolor: white;\nfont-size: 40px;\ntransform: translateX(-50%);\ntext-shadow: -2px 0 black, 0 2px black, 2px 0 black, 0 -2px black;\n}\n.small-div {\nwidth: 30px;\nheight: 100px;\nbackground-color: blue;\nborder-radius: 10px;\nborder: 2px solid black;\nposition:relative;\nleft:-38px;\nbottom: -60px;\n}\n.small-div-right {\nwidth: 30px;\nheight: 100px;\nbackground-color: blue;\nborder-radius: 10px;\nborder: 2px solid black;\nposition:relative;\nleft: 312px;\nbottom: -60px;\n}\n.vertical-text {\nposition:absolute;\nbottom:34%;\nleft:-8px; /*3*/\ncolor:white;\nfont-size:x-large;\ntransform-origin:center center;\ntransform:rotate(-270deg);\n}\n.traffic-light {\nwidth: 50px;\nbackground-color: #333;\nborder-radius: 10px;\npadding: 10px;\n}\n.light {\nheight: 50px;\nwidth: 50px;\nmargin-bottom: 10px;\nborder-radius: 50%;\n}\n.red {\nbackground-color: #f00;\n}\n.green {\nbackground-color: #0f0;\n}\n.off {\nbackground-color: #555;\n}\n.graphbackground {\nbackground-color: rgba(2, 2, 2, 0.5);\n}\n</style>\n</head>\n<body class=\"hide\">\n<div id=\"resizable-table\" class=\"outer-block\">\n<div class=\"scaler\">\n<table class=\"tg\" id=\"fuelmonitor\">\n<tbody>\n<tr>\n<td class=\"tg-xtf7\">Fuel/Lap</td>\n<td class=\"tg-xtf7\">Best Lap</td>\n</tr>\n<tr>\n<td class=\"tg-11ac\">9.99</td>\n<td class=\"tg-11ac\">8:32.000</td>\n</tr>\n<tr>\n<td class=\"tg-11ac\">432.00</td>\n<td class=\"tg-11ac\">200.00</td>\n</tr>\n<tr>\n<td class=\"tg-xtf7\">Fuel Race</td>\n<td class=\"tg-xtf7\">Fuel Remain</td>\n</tr>\n</tbody>\n</table>\n</div>\n<div id=\"draggable-corner\" class=\"hide\"></div>\n</div>\n<div id=\"resizable-table\" class=\"outer-block\">\n<div class=\"scaler\">\n<table class=\"tg\" id=\"relative\">\n<tbody>\n<tr>\n<td class=\"tg-a0w5\"></td>\n<td class=\"tg-a0w5\"></td>\n<td class=\"tg-a0w5\"></td>\n<td class=\"tg-a0w5\"></td>\n</tr>\n<tr>\n<td class=\"tg-a0w5\"></td>\n<td class=\"tg-a0w5\"></td>\n<td class=\"tg-a0w5\"></td>\n<td class=\"tg-a0w5\"></td>\n</tr>\n<tr>\n<td class=\"tg-a0w5\"></td>\n<td class=\"tg-a0w5\"></td>\n<td class=\"tg-a0w5\"></td>\n<td class=\"tg-a0w5\"></td>\n</tr>\n<tr>\n<td class=\"tg-a0w5\"></td>\n<td class=\"tg-a0w5\"></td>\n<td class=\"tg-a0w5\"></td>\n<td class=\"tg-a0w5\"></td>\n</tr>\n<tr>\n<td class=\"tg-a0w5\"></td>\n<td class=\"tg-a0w5\"></td>\n<td class=\"tg-a0w5\"></td>\n<td class=\"tg-a0w5\"></td>\n</tr>\n<tr>\n<td class=\"tg-a0w5\"></td>\n<td class=\"tg-a0w5\"></td>\n<td class=\"tg-a0w5\"></td>\n<td class=\"tg-a0w5\"></td>\n</tr>\n<tr>\n<td class=\"tg-a0w5\"></td>\n<td class=\"tg-a0w5\"></td>\n<td class=\"tg-a0w5\"></td>\n<td class=\"tg-a0w5\"></td>\n</tr>\n<tr>\n<td class=\"tg-a0w5\"></td>\n<td class=\"tg-a0w5\"></td>\n<td class=\"tg-a0w5\"></td>\n<td class=\"tg-a0w5\"></td>\n</tr>\n<tr>\n<td class=\"tg-a0w5\"></td>\n<td class=\"tg-a0w5\"></td>\n<td class=\"tg-a0w5\"></td>\n<td class=\"tg-a0w5\"></td>\n</tr>\n<tr>\n<td class=\"tg-a0w5\"></td>\n<td class=\"tg-a0w5\"></td>\n<td class=\"tg-a0w5\"></td>\n<td class=\"tg-a0w5\"></td>\n</tr>\n<tr>\n<td class=\"tg-a0w5\"></td>\n<td class=\"tg-a0w5\"></td>\n<td class=\"tg-a0w5\"></td>\n<td class=\"tg-a0w5\"></td>\n</tr>\n</tbody>\n</table>\n</div>\n<div id=\"draggable-corner\" class=\"hide\"></div>\n</div>\n<div id=\"resizable-table\" class=\"canv\">\n<div class=\"scaler\">\n<canvas class=\"border\" id=\"myCanvas\" width=\"400\" height=\"400\"></canvas>\n</div>\n<div id=\"draggable-corner\" class=\"hide\"></div>\n</div>\n<div id=\"resizable-table\" class=\"outer-block\">\n<div class=\"scaler\">\n<div id=\"delta\" class=\"inner-block\">-</div>\n<div class=\"inner-block\">Delta</div>\n</div>\n<div id=\"draggable-corner\" class=\"hide\"></div>\n</div>\n<div id=\"resizable-table\" class=\"outer-block\">\n<div class=\"scaler\">\n<div id=\"bestlap\" class=\"inner-block\">-</div>\n<div class=\"inner-block\">Best Lap</div>\n</div>\n<div id=\"draggable-corner\" class=\"hide\"></div>\n</div>\n<div id=\"resizable-table\" class=\"outer-block\">\n<div class=\"scaler\">\n<div id=\"bestlaplead\" class=\"inner-block\">-</div>\n<div class=\"inner-block\">Best Lap Leader</div>\n</div>\n<div id=\"draggable-corner\" class=\"hide\"></div>\n</div>\n<div id=\"resizable-table\" class=\"outer-block\">\n<div class=\"scaler\">\n<div id=\"lastlap\" class=\"inner-block\">-</div>\n<div class=\"inner-block\">Last Lap</div>\n</div>\n<div id=\"draggable-corner\" class=\"hide\"></div>\n</div>\n<div id=\"resizable-table\" class=\"outer-block\">\n<div class=\"scaler\">\n<table class=\"tg\" id=\"inputs\">\n<tbody>\n<tr>\n<td class=\"tg-a0w51\">100</td>\n<td class=\"tg-a0w51\">100</td>\n</tr>\n<tr>\n<td class=\"tg-a0w51\">100</td>\n<td class=\"tg-a0w51\">100</td>\n</tr>\n</tbody>\n</table>\n</div>\n<div id=\"draggable-corner\" class=\"hide\"></div>\n</div>\n<div id=\"toggle-settings\"></div>\n<div id=\"resizable-table\" class=\"outer-block\">\n<div class=\"over scaler\">\n<div class=\"container\">\n<div class=\"div\">\n<div class=\"content\"><div class=\"data\" id=\"flTemp1\">123</div><div class=\"sign\">°</div></div>\n<div class=\"big-text\"><div class=\"data\" id=\"flWear\">100</div><div class=\"sign\"></div></div>\n<div class=\"upper-text\"><div class=\"data\" id=\"flPressure\">241</div><div class=\"sign\"> kPa</div></div>\n<div class=\"under-text\"><div class=\"data\" id=\"flDirt\">100</div><div class=\"sign\">%</div></div>\n<div class=\"small-div\"><div class=\"vertical-text\"><div class=\"data\" id=\"flBrake\">123</div><div class=\"sign\">°</div></div></div>\n</div>\n<div class=\"div\">\n<div class=\"content\"><div class=\"data\" id=\"flTemp2\">456</div><div class=\"sign\">°</div></div>\n</div>\n<div class=\"div\">\n<div class=\"content\"><div class=\"data\" id=\"flTemp3\">789</div><div class=\"sign\">°</div></div>\n</div>\n</div>\n<div class=\"container\">\n<div class=\"div\">\n<div class=\"content\"><div class=\"data\" id=\"frTemp1\">123</div><div class=\"sign\">°</div></div>\n<div class=\"big-text\"><div class=\"data\" id=\"frWear\">100</div><div class=\"sign\"></div></div>\n<div class=\"upper-text\"><div class=\"data\" id=\"frPressure\">241</div><div class=\"sign\"> kPa</div></div>\n<div class=\"under-text\"><div class=\"data\" id=\"frDirt\">100</div><div class=\"sign\">%</div></div>\n<div class=\"small-div-right\"><div class=\"vertical-text\"><div class=\"data\" id=\"frBrake\">123</div><div class=\"sign\">°</div></div></div>\n</div>\n<div class=\"div\">\n<div class=\"content\"><div class=\"data\" id=\"frTemp2\">456</div><div class=\"sign\">°</div></div>\n</div>\n<div class=\"div\">\n<div class=\"content\"><div class=\"data\" id=\"frTemp3\">789</div><div class=\"sign\">°</div></div>\n</div>\n</div>\n<div class=\"container\">\n<div class=\"div\">\n<div class=\"content\"><div class=\"data\" id=\"rlTemp1\">123</div><div class=\"sign\">°</div></div>\n<div class=\"big-text\"><div class=\"data\" id=\"rlWear\">100</div><div class=\"sign\"></div></div>\n<div class=\"upper-text\"><div class=\"data\" id=\"rlPressure\">241</div><div class=\"sign\"> kPa</div></div>\n<div class=\"under-text\"><div class=\"data\" id=\"rlDirt\">100</div><div class=\"sign\">%</div></div>\n<div class=\"small-div\"><div class=\"vertical-text\"><div class=\"data\" id=\"rlBrake\">123</div><div class=\"sign\">°</div></div></div>\n</div>\n<div class=\"div\">\n<div class=\"content\"><div class=\"data\" id=\"rlTemp2\">456</div><div class=\"sign\">°</div></div>\n</div>\n<div class=\"div\">\n<div class=\"content\"><div class=\"data\" id=\"rlTemp3\">789</div><div class=\"sign\">°</div></div>\n</div>\n</div>\n<div class=\"container\">\n<div class=\"div\">\n<div class=\"content\"><div class=\"data\" id=\"rrTemp1\">123</div><div class=\"sign\">°</div></div>\n<div class=\"big-text\"><div class=\"data\" id=\"rrWear\">100</div><div class=\"sign\"></div></div>\n<div class=\"upper-text\"><div class=\"data\" id=\"rrPressure\">241</div><div class=\"sign\"> kPa</div></div>\n<div class=\"under-text\"><div class=\"data\" id=\"rrDirt\">111</div><div class=\"sign\">%</div></div>\n<div class=\"small-div-right\"><div class=\"vertical-text\"><div class=\"data\" id=\"rrBrake\">123</div><div class=\"sign\">°</div></div></div>\n</div>\n<div class=\"div\">\n<div class=\"content\"><div class=\"data\" id=\"rrTemp2\">456</div><div class=\"sign\">°</div></div>\n</div>\n<div class=\"div\">\n<div class=\"content\"><div class=\"data\" id=\"rrTemp3\">789</div><div class=\"sign\">°</div></div>\n</div>\n</div>\n</div>\n<div id=\"draggable-corner\" class=\"hide\"></div>\n</div>\n<div id=\"resizable-table\" class=\"outer-block\">\n<div class=\"scaler\">\n<div id=\"startLight\" class=\"inner-block traffic-light hide\">\n<div class=\"light off\"></div>\n<div class=\"light off\"></div>\n<div class=\"light off\"></div>\n<div class=\"light off\"></div>\n<div class=\"light off\"></div>\n<div class=\"light off\"></div>\n</div>\n</div>\n<div id=\"draggable-corner\" class=\"hide\"></div>\n</div>\n<div id=\"resizable-table\">\n<div class=\"scaler\">\n<div class=\"graphbackground\">\n<canvas id=\"chart\" width=\"400\" height=\"150\"></canvas>\n</div>\n</div>\n<div id=\"draggable-corner\" class=\"hide\"></div>\n</div>\n</body>\n</html>\n";
//char* responz1 = "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Your Page Title</title>\n\n    <script>\n\n        function getTemperatureColor(temp, cold_temp, optimal_temp, hot_temp) {\n            var color;\n            if (temp <= cold_temp) {\n                color = `rgb(0,0,255)`;\n            } else if (temp >= hot_temp) {\n                color = `rgb(255,0,0)`;\n            } else if (temp == optimal_temp) {\n                color = `rgb(0,255,0)`;\n            } else if (temp < optimal_temp) {\n                var ratio = (temp - cold_temp) / (optimal_temp - cold_temp);\n                color = `rgb(0, ${Math.floor(255 * ratio)}, ${Math.floor(255 * (1 - ratio))})`;\n            } else {\n                var ratio = (temp - optimal_temp) / (hot_temp - optimal_temp);\n                color = `rgb(${Math.floor(255 * ratio)}, ${Math.floor(255 * (1 - ratio*1.2))}, 0)`;\n            }\n            return color;\n        }\n        \n        const socket = new WebSocket('ws://localhost:8082');\n        \n        var loadedRat = {};\n        loadedRat[-1] = {\n            \"UserId\" : -1,\n            \"Fullname\" : \"bot\",\n            \"Rating\" : 0,\n            \"Reputation\" : 0\n        };\n\n        document.addEventListener(\"DOMContentLoaded\", function (event) {\n            var lastLap = document.querySelector(\"#lastlap\");\n            var bestLapLead = document.querySelector(\"#bestlaplead\");\n            var delta = document.querySelector(\"#delta\");\n            var bestLap = document.querySelector(\"#bestlap\");\n            var fuelMonitorTds = document.querySelectorAll(\"#fuelmonitor td\");\n            var inputsTds = document.querySelectorAll(\"#inputs td\");\n            var wheelsTds = document.querySelectorAll(\"#wheels td\");\n            var relativeTrs = document.querySelectorAll(\"#relative tr\");\n            var relativeTds = {};\n            var startLight = document.querySelector(\"#startLight\");\n            var startLightDivs = document.querySelectorAll(\"#startLight div\");\n\n            var flTemp1 = document.querySelector(\"#flTemp1\");\n            var flWear = document.querySelector(\"#flWear\");\n            var flPressure = document.querySelector(\"#flPressure\");\n            var flDirt = document.querySelector(\"#flDirt\");\n            var flBrake = document.querySelector(\"#flBrake\");\n            var flTemp2 = document.querySelector(\"#flTemp2\");\n            var flTemp3 = document.querySelector(\"#flTemp3\");\n            \n            var frTemp1 = document.querySelector(\"#frTemp1\");\n            var frWear = document.querySelector(\"#frWear\");\n            var frPressure = document.querySelector(\"#frPressure\");\n            var frDirt = document.querySelector(\"#frDirt\");\n            var frBrake = document.querySelector(\"#frBrake\");\n            var frTemp2 = document.querySelector(\"#frTemp2\");\n            var frTemp3 = document.querySelector(\"#frTemp3\");\n\n            var rlTemp1 = document.querySelector(\"#rlTemp1\");\n            var rlWear = document.querySelector(\"#rlWear\");\n            var rlPressure = document.querySelector(\"#rlPressure\");\n            var rlDirt = document.querySelector(\"#rlDirt\");\n            var rlBrake = document.querySelector(\"#rlBrake\");\n            var rlTemp2 = document.querySelector(\"#rlTemp2\");\n            var rlTemp3 = document.querySelector(\"#rlTemp3\");\n\n            var rrTemp1 = document.querySelector(\"#rrTemp1\");\n            var rrWear = document.querySelector(\"#rrWear\");\n            var rrPressure = document.querySelector(\"#rrPressure\");\n            var rrDirt = document.querySelector(\"#rrDirt\");\n            var rrBrake = document.querySelector(\"#rrBrake\");\n            var rrTemp2 = document.querySelector(\"#rrTemp2\");\n            var rrTemp3 = document.querySelector(\"#rrTemp3\");\n\n            for (let i = 0; i < relativeTrs.length; i++) {\n                relativeTds[i] = relativeTrs[i].querySelectorAll(\"td\");\n            }\n            document.querySelector(\"#toggle-settings\").addEventListener( \"click\", (e) => {\n                addSettingsListeners();\n            } )\n\n            const canvas = document.getElementById('myCanvas');\n            const ctx = canvas.getContext('2d');\n            \n            var carMain = { x: canvas.width / 2, y: canvas.height / 2, rotation: 0, width: 1.970000*20, length: 4.756699*20 };\n            var cars = [];\n            \n            let canvasWidth, canvasHeight;\n\n            function updateCanvasSize(width, height) {\n                canvasWidth = canvas.width = width;\n                canvasHeight = canvas.height = height;\n                requestAnimationFrame(drawCars);\n            }\n\n            \n            function drawCar(x, y, rotation, width, length, color) {\n                ctx.save();\n\n                ctx.translate(x, y);\n\n                ctx.rotate(rotation);\n\n                ctx.fillStyle = color;\n                \n                ctx.fillRect(-width / 2, -length / 2, width, length);\n\n                ctx.beginPath();\n                ctx.moveTo(0, 0);\n                if (color == 'red')\n                    ctx.lineTo(0, length / 2);\n                else\n                    ctx.lineTo(0, -length / 2); \n                ctx.strokeStyle = 'black';\n                ctx.stroke();\n\n                ctx.restore();\n            }\n\n            function drawCars() {\n                ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n                drawCar(carMain.x, carMain.y, carMain.rotation, carMain.width, carMain.length, 'white');\n\n                if ( cars.length > 0 )\n                for (let i = 0; i < cars.length; i++) {\n                    drawCar(cars[i].x, cars[i].y, cars[i].rotation, cars[i].width, cars[i].length, 'red');\n                }\n            }\n            function printFrame() {\n                drawCars();\n            }\n\n            updateCanvasSize(400,400);\n            window.addEventListener('resize', updateCanvasSize);\n\n            requestAnimationFrame(drawCars);\n\n\n            var resizableTable = null;\n            var draggableCorner = null;\n            let isDragging = false;\n            let isResizing = false;\n            let isScaling = false;\n            let initialX, initialY, initialWidth, initialHeight, initialScale;\n            var isSettingsOn = false;\n            function msDwn ( e ) {\n\n                e.preventDefault();\n\n                if (e.target.id == \"draggable-corner\") {\n                    switch (e.button) {\n                        case 0:\n                            resizableTable = e.target.parentElement;\n                            isResizing = true;\n                            initialWidth = resizableTable.offsetWidth;\n                            initialHeight = resizableTable.offsetHeight;\n                            initialX = e.clientX;\n                            initialY = e.clientY;\n                            break;\n                        case 2:\n                            resizableTable = e.target.parentElement.firstElementChild;\n                            isScaling = true;\n\n                            var style = window.getComputedStyle(resizableTable);\n                            var transform = style.getPropertyValue('transform');\n                            if (transform != 'none') {\n                                var values = transform.split('(')[1].split(')')[0].split(',');\n                                \n                                initialScale = parseFloat(values[0]);\n                            } else {\n                                initialScale = 1;\n                            }\n                            \n                            initialX = e.clientX;\n                            initialY = e.clientY;\n                            break;\n                        default:\n                            console.log('Unexpected mouse button clicked.');\n                    }\n                } else {\n                    resizableTable = e.target;\n                    while (resizableTable.id !== 'resizable-table') {\n                        resizableTable = resizableTable.parentElement;\n                    }\n                    isDragging = true;\n                    initialX = e.clientX - resizableTable.offsetLeft;\n                    initialY = e.clientY - resizableTable.offsetTop;\n                }\n            }\n\n            function msMv ( e ) {\n                if (isScaling) {\n                    var movementX = e.clientX - initialX;\n                    var newScale = initialScale + movementX / 100;\n                    resizableTable.style.transform = 'scale(' + newScale + ')';\n                } else if (isResizing) {\n                    const deltaX = e.clientX - initialX;\n                    const deltaY = e.clientY - initialY;\n                    const newWidth = Math.max(30, initialWidth + deltaX);\n                    const newHeight = Math.max(30, initialHeight + deltaY);\n\n                    const maxX = window.innerWidth - resizableTable.offsetLeft;\n                    const maxY = window.innerHeight - resizableTable.offsetTop;\n\n                    resizableTable.style.width = `${Math.min(newWidth, maxX)}px`;\n                    resizableTable.style.height = `${Math.min(newHeight, maxY)}px`;\n                    if ( resizableTable.className === \"canv\" ) {\n                        updateCanvasSize(Math.min(newWidth, maxX), Math.min(newHeight, maxY));\n                    }\n                } else if (isDragging) {\n                    const newX = e.clientX - initialX;\n                    const newY = e.clientY - initialY;\n\n                    const maxX = window.innerWidth - resizableTable.offsetWidth;\n                    const maxY = window.innerHeight - resizableTable.offsetHeight;\n\n                    const clampedX = Math.max(0, Math.min(newX, maxX));\n                    const clampedY = Math.max(0, Math.min(newY, maxY));\n\n                    resizableTable.style.left = `${clampedX}px`;\n                    resizableTable.style.top = `${clampedY}px`;\n                }\n            }\n\n            function msUp ( e ) {\n                isDragging = false;\n                isResizing = false;\n                isScaling = false;\n            }\n\n            function sendPositions () {\n                var firstLeft = -1000;\n                var dataToSend = [9];\n                    var count = 0\n                document.querySelectorAll(\"#resizable-table\").forEach(function (element) {\n                    var rect = element.getBoundingClientRect();\n\n                    console.log(rect.left);\n                    if (firstLeft == -1000) {\n                        firstLeft = rect.left;\n                    }\n                    dataToSend.push(rect.left);\n                    dataToSend.push(rect.top);\n                    dataToSend.push(rect.width-2);\n                    dataToSend.push(rect.height-2);\n                    var resizableTable = element.firstElementChild;\n                    var style = window.getComputedStyle(resizableTable);\n                    var transform = style.getPropertyValue('transform');\n                    if (transform != 'none') {\n                        var values = transform.split('(')[1].split(')')[0].split(',');\n                        count++;\n                        var trans = parseFloat(values[0]);\n                        \n                        dataToSend.push(Math.floor(trans));\n                        dataToSend.push(Math.round((trans-Math.floor(trans))*100).toFixed(0));\n                    } else {\n                        dataToSend.push(1);\n                        dataToSend.push(0);\n                    }\n                });\n                console.log(dataToSend)\n                var byteArray = new Uint16Array(dataToSend);\n                let char1 = firstLeft & 0xFF;  // Low byte\n                let char2 = (firstLeft >> 8) & 0xFF;\n                var buff = byteArray.buffer;\n\n                var viewTemp = new Uint8Array(buff);\n\n                viewTemp[2] = char1;  \n                viewTemp[3] = char2;  \n\n                var viewCorrected = new Uint16Array(buff);\n                console.log(viewCorrected);\n                console.log(viewCorrected.buffer);\n\n                socket.send(viewCorrected.buffer);\n            }\n\n            function addSettingsListeners () {\n                if ( isSettingsOn === true ) {\n                    document.querySelectorAll(\"#resizable-table\").forEach(function (element) {\n                        element.removeEventListener(\"mousedown\", msDwn);\n                        element.querySelector(\"#draggable-corner\").classList.add('hide');\n                        element.classList.remove(\"border\");\n                    });\n                    document.querySelector(\"#startLight\").classList.add('hide');\n\n                    document.removeEventListener(\"mousemove\", msMv);\n\n                    document.removeEventListener(\"mouseup\", msUp);\n                    \n                    isSettingsOn = false;\n                    sendPositions();\n                } else {\n                    document.querySelectorAll(\"#resizable-table\").forEach(function (element) {\n                        element.addEventListener(\"mousedown\", msDwn);\n                        element.querySelector(\"#draggable-corner\").classList.remove('hide');\n                        element.classList.add(\"border\");\n                    });;\n                    document.querySelector(\"#startLight\").classList.remove('hide');\n\n                    document.addEventListener(\"mousemove\", msMv);\n\n                    document.addEventListener(\"mouseup\", msUp);\n                    \n                    isSettingsOn = true;\n                }\n            }\n\n            fl = document.querySelectorAll(\"#wheels td\")[15]\n            fr = document.querySelectorAll(\"#wheels td\")[16];\n            rl = document.querySelectorAll(\"#wheels td\")[23];\n            rr = document.querySelectorAll(\"#wheels td\")[24];\n\n            socket.binaryType = \"arraybuffer\";\n            socket.addEventListener('open', (event) => {\n            });\n            var delay = 0;\n            socket.addEventListener('message', (event) => {\n                if (event.data instanceof ArrayBuffer) {\n                    let view = new Uint8Array(event.data);\n                    \n                    const view1 = new DataView(event.data);\n                    if (view[0] == 1/*1*/) {\n                        var deltaHtml = view1.getFloat32(1, true).toFixed(3)\n                        if (deltaHtml > 0) {\n                            delta.style.color = `rgb(255,0,0)`;\n                        } else {\n                            delta.style.color = `rgb(0,255,0)`;\n                        }\n                        deltaHtml = deltaHtml == -1000 ? \"-\" : deltaHtml\n                        delta.innerHTML = deltaHtml;\n                        carMain.x = -view1.getFloat32(1 + 4, true)+500;\n                        carMain.y = -view1.getFloat32(1 + 8, true)+500;\n                        carMain.rotation = view1.getFloat32(1 + 12, true);\n                        carMain.width = view1.getFloa";
//char* responz2 = "t32(1 + 16, true)*20;\n                        carMain.length = view1.getFloat32(1 + 20, true)*20;\n\n                        var bytes = 21\n                        while ( true ) {\n                            cars.push({ \n                                x: -view1.getFloat32(bytes + 4, true)+500, \n                                y: -view1.getFloat32(bytes + 8, true)+500, \n                                rotation: view1.getFloat32(bytes + 12, true), \n                                width: view1.getFloat32(bytes + 16, true)*20, \n                                length: view1.getFloat32(bytes + 20, true)*20 \n                            });\n                            bytes += 20\n                            if ( bytes + 4 == view1.byteLength ) {\n                                break;\n                            }\n                        }\n\n                        function calculateDistance(carMain, car2) {\n\n                            var dx = car2.x - carMain.x;\n                            var dy = car2.y - carMain.y;\n\n                            var distanceCenter = Math.sqrt(dx * dx + dy * dy);\n                            distanceCenter *=20;\n\n\n                            return distanceCenter;\n                        }\n\n                        function calculateSecondCarPosition(carMain, distance, angle) {\n                            const newX = carMain.x - distance * Math.cos(angle);\n                            const newY = carMain.y + distance * Math.sin(angle);\n\n                            return { x: newX, y: newY };\n                        }\n\n                        function calculateAngle(carMain, car2) {\n                            return Math.atan2(car2.y - carMain.y, car2.x - carMain.x);\n                        }\n                        var dist = 0;\n                        if ( cars.length > 0 )\n                        for (let i = 0; i < cars.length; i++) {\n                                    \n                            carMainTemp = { ...carMain };\n                            const angleBetweenCars = calculateAngle(carMainTemp, cars[i]);\n\n                            distance = calculateDistance(carMainTemp, cars[i]) \n                            dist = distance\n                            var angle = angleBetweenCars;\n                            \n\n                            let equivalentAngle1 = ((angle * (180 / Math.PI)) + (carMainTemp.rotation * (180 / Math.PI)))  % 360;\n\n                            if (equivalentAngle1 < 0) {\n                                equivalentAngle1 += 360;\n                            }\n                            angle = equivalentAngle1 - 180;\n                            angle = (angle * Math.PI) / 180\n                            carMainTemp.x = canvas.width / 2;\n                            carMainTemp.y = canvas.height / 2;\n                            \n                            var pso = calculateSecondCarPosition(carMainTemp, distance, angle);\n                            \n                            cars[i].x = pso.x;\n                            cars[i].y = pso.y;\n                            \n                            carMainTemp.rotation = carMainTemp.rotation * (180 / Math.PI);\n                            cars[i].rotation = cars[i].rotation * (180 / Math.PI);\n                            \n                            carMainTemp.rotation = 360 - carMainTemp.rotation;\n                            let sum = carMainTemp.rotation + cars[i].rotation;\n\n                            let equivalentAngle = sum % 360;\n\n                            if (equivalentAngle < 0) {\n                                equivalentAngle += 360;\n                            }\n                            cars[i].rotation = equivalentAngle - 180;\n\n                            \n                            carMainTemp.rotation = (360 * Math.PI) / 180;\n                            cars[i].rotation = (cars[i].rotation * Math.PI) / 180;\n                        }\n\n                        \n                        carMain.x = canvas.width / 2;\n                        carMain.y = canvas.height / 2;\n                        carMain.rotation = (360 * Math.PI) / 180;\n                        printFrame();\n                        cars.length = 0;\n                        return;\n                    }\n                    if (view[0] == 2) {\n                        var offset = 1;\n                        flWear.innerHTML = (view1.getFloat32(offset, true)*100).toFixed(2);//fl\n                        offset += 4;\n                        frWear.innerHTML = (view1.getFloat32(offset, true)*100).toFixed(2);//fr\n                        offset += 4;\n                        rlWear.innerHTML = (view1.getFloat32(offset, true)*100).toFixed(2);//rl\n                        offset += 4;\n                        rrWear.innerHTML = (view1.getFloat32(offset, true)*100).toFixed(2);//rr\n                        offset += 4;\n                        \n                        flPressure.innerHTML = view1.getFloat32(offset, true).toFixed(1);\n                        offset += 4;\n                        frPressure.innerHTML = view1.getFloat32(offset, true).toFixed(1);\n                        offset += 4;\n                        rlPressure.innerHTML = view1.getFloat32(offset, true).toFixed(1);\n                        offset += 4;\n                        rrPressure.innerHTML = view1.getFloat32(offset, true).toFixed(1);\n                        offset += 4;\n                        \n                        flDirt.innerHTML = (view1.getFloat32(offset, true)*100).toFixed(3);\n                        offset += 4;\n                        frDirt.innerHTML = (view1.getFloat32(offset, true)*100).toFixed(3);\n                        offset += 4;\n                        rlDirt.innerHTML = (view1.getFloat32(offset, true)*100).toFixed(3);\n                        offset += 4;\n                        rrDirt.innerHTML = (view1.getFloat32(offset, true)*100).toFixed(3);\n                        offset += 4;\n                        \n                        var flBrakeTemp = view1.getFloat32(offset, true).toFixed(0);\n                        flBrake.innerHTML = flBrakeTemp;\n                        offset += 4;\n                        var brakeTempOptFl = view1.getFloat32(offset, true);\n                        offset += 4;\n                        var brakeTempCldFl = view1.getFloat32(offset, true);\n                        offset += 4;\n                        var brakeTempHotFl = view1.getFloat32(offset, true);\n                        offset += 4;\n                        flBrake.parentElement.parentElement.style.backgroundColor = getTemperatureColor(flBrakeTemp, brakeTempCldFl, brakeTempOptFl, brakeTempHotFl);\n                        \n                        var frBrakeTemp = view1.getFloat32(offset, true).toFixed(0);\n                        frBrake.innerHTML = frBrakeTemp;\n                        offset += 4;\n                        var brakeTempOptFr = view1.getFloat32(offset, true);\n                        offset += 4;\n                        var brakeTempCldFr = view1.getFloat32(offset, true);\n                        offset += 4;\n                        var brakeTempHotFr = view1.getFloat32(offset, true);\n                        offset += 4;\n                        frBrake.parentElement.parentElement.style.backgroundColor = getTemperatureColor(frBrakeTemp, brakeTempCldFr, brakeTempOptFr, brakeTempHotFr);\n                        \n                        var rlBrakeTemp = view1.getFloat32(offset, true).toFixed(0);\n                        rlBrake.innerHTML = rlBrakeTemp;\n                        offset += 4;\n                        var brakeTempOptRl = view1.getFloat32(offset, true);\n                        offset += 4;\n                        var brakeTempCldRl = view1.getFloat32(offset, true);\n                        offset += 4;\n                        var brakeTempHotRl = view1.getFloat32(offset, true);\n                        offset += 4;\n                        rlBrake.parentElement.parentElement.style.backgroundColor = getTemperatureColor(rlBrakeTemp, brakeTempCldRl, brakeTempOptRl, brakeTempHotRl);\n                        \n                        var rrBrakeTemp = view1.getFloat32(offset, true).toFixed(0);\n                        rrBrake.innerHTML = rrBrakeTemp;\n                        offset += 4;\n                        var brakeTempOptRr = view1.getFloat32(offset, true);\n                        offset += 4;\n                        var brakeTempCldRr = view1.getFloat32(offset, true);\n                        offset += 4;\n                        var brakeTempHotRr = view1.getFloat32(offset, true);\n                        offset += 4;\n                        rrBrake.parentElement.parentElement.style.backgroundColor = getTemperatureColor(rrBrakeTemp, brakeTempCldRr, brakeTempOptRr, brakeTempHotRr);\n                        \n                        return;\n                    }\n                    if (view[0] == 3) {\n                        var offset = 1;\n\n                        var flTemp1Temp = view1.getFloat32(offset, true).toFixed(0);\n                        flTemp1.innerHTML = flTemp1Temp;\n                        offset += 4;\n                        var flTemp2Temp = view1.getFloat32(offset, true).toFixed(0);\n                        flTemp2.innerHTML = flTemp2Temp;\n                        offset += 4;\n                        var flTemp3Temp = view1.getFloat32(offset, true).toFixed(0);\n                        flTemp3.innerHTML = flTemp3Temp;\n                        offset += 4;\n                        var tireTempOptFl = view1.getFloat32(offset, true);\n                        offset += 4;\n                        var tireTempCldFl = view1.getFloat32(offset, true);\n                        offset += 4;\n                        var tireTempHotFl = view1.getFloat32(offset, true);\n                        offset += 4;\n                        flTemp1.parentElement.parentElement.style.backgroundColor = getTemperatureColor(flTemp1Temp, tireTempCldFl, tireTempOptFl, tireTempHotFl);\n                        flTemp2.parentElement.parentElement.style.backgroundColor = getTemperatureColor(flTemp2Temp, tireTempCldFl, tireTempOptFl, tireTempHotFl);\n                        flTemp3.parentElement.parentElement.style.backgroundColor = getTemperatureColor(flTemp3Temp, tireTempCldFl, tireTempOptFl, tireTempHotFl);\n                        \n                        var frTemp1Temp = view1.getFloat32(offset, true).toFixed(0);\n                        frTemp1.innerHTML = frTemp1Temp;\n                        offset += 4;\n                        var frTemp2Temp = view1.getFloat32(offset, true).toFixed(0);\n                        frTemp2.innerHTML = frTemp2Temp;\n                        offset += 4;\n                        var frTemp3Temp = view1.getFloat32(offset, true).toFixed(0);\n                        frTemp3.innerHTML = frTemp3Temp;\n                        offset += 4;\n                        var tireTempOptFr = view1.getFloat32(offset, true);\n                        offset += 4;\n                        var tireTempCldFr = view1.getFloat32(offset, true);\n                        offset += 4;\n                        var tireTempHotFr = view1.getFloat32(offset, true);\n                        offset += 4;\n                        frTemp1.parentElement.parentElement.style.backgroundColor = getTemperatureColor(frTemp1Temp, tireTempCldFr, tireTempOptFr, tireTempHotFr);\n                        frTemp2.parentElement.parentElement.style.backgroundColor = getTemperatureColor(frTemp2Temp, tireTempCldFr, tireTempOptFr, tireTempHotFr);\n                        frTemp3.parentElement.parentElement.style.backgroundColor = getTemperatureColor(frTemp3Temp, tireTempCldFr, tireTempOptFr, tireTempHotFr);\n                        \n                        var rlTemp1Temp = view1.getFloat32(offset, true).toFixed(0);\n                        rlTemp1.innerHTML = rlTemp1Temp;\n                        offset += 4;\n                        var rlTemp2Temp = view1.getFloat32(offset, true).toFixed(0);\n                        rlTemp2.innerHTML = rlTemp2Temp;\n                        offset += 4;\n                        var rlTemp3Temp = view1.getFloat32(offset, true).toFixed(0);\n                        rlTemp3.innerHTML = rlTemp3Temp;\n                        offset += 4;\n                        var tireTempOptRl = view1.getFloat32(offset, true);\n                        offset += 4;\n                        var tireTempCldRl = view1.getFloat32(offset, true);\n                        offset += 4;\n                        var tireTempHotFRl = view1.getFloat32(offset, true);\n                        offset += 4;\n                        rlTemp1.parentElement.parentElement.style.backgroundColor = getTemperatureColor(rlTemp1Temp, tireTempCldRl, tireTempOptRl, tireTempHotFRl);\n                        rlTemp2.parentElement.parentElement.style.backgroundColor = getTemperatureColor(rlTemp2Temp, tireTempCldRl, tireTempOptRl, tireTempHotFRl);\n                        rlTemp3.parentElement.parentElement.style.backgroundColor = getTemperatureColor(rlTemp3Temp, tireTempCldRl, tireTempOptRl, tireTempHotFRl);\n                        \n                        var rrTemp1Temp = view1.getFloat32(offset, true).toFixed(0);\n                        rrTemp1.innerHTML = rrTemp1Temp;\n                        offset += 4;\n                        var rrTemp2Temp = view1.getFloat32(offset, true).toFixed(0);\n                        rrTemp2.innerHTML = rrTemp2Temp;\n                        offset += 4;\n                        var rrTemp3Temp = view1.getFloat32(offset, true).toFixed(0);\n                        rrTemp3.innerHTML = rrTemp3Temp;\n                        offset += 4;\n                        var tireTempOptRr = view1.getFloat32(offset, true);\n                        offset += 4;\n                        var tireTempCldRr = view1.getFloat32(offset, true);\n                        offset += 4;\n                        var tireTempHotFRr = view1.getFloat32(offset, true);\n                        offset += 4;\n                        rrTemp1.parentElement.parentElement.style.backgroundColor = getTemperatureColor(rrTemp1Temp, tireTempCldRr, tireTempOptRr, tireTempHotFRr);\n                        rrTemp2.parentElement.parentElement.style.backgroundColor = getTemperatureColor(rrTemp2Temp, tireTempCldRr, tireTempOptRr, tireTempHotFRr);\n                        rrTemp3.parentElement.parentElement.style.backgroundColor = getTemperatureColor(rrTemp3Temp, tireTempCldRr, tireTempOptRr, tireTempHotFRr);\n                        \n                        var inputThrottle = (view1.getFloat32(offset, true)*100).toFixed(2);\n                        offset += 4;\n                        var inputBrake = (view1.getFloat32(offset, true)*100).toFixed(2);\n                        offset += 4;\n\n                        var inputThrottleRaw = view1.getFloat32(offset, true)*100;\n                        offset += 4;\n                        var inputBrakeRaw = view1.getFloat32(offset, true)*100;\n                        \n                        if (inputThrottleRaw < 1 && inputThrottleRaw > 0) {\n                            inputThrottleRaw = 1;\n                        }\n                        if (inputBrakeRaw < 1 && inputBrakeRaw > 0) {\n                            inputBrakeRaw = 1;\n                        }\n                       ";
//char* responz3 = " inputsTds[0].innerHTML = inputThrottle;\n                        inputsTds[1].innerHTML = inputBrake;\n                        inputsTds[2].innerHTML = inputThrottleRaw.toFixed(1);\n                        inputsTds[3].innerHTML = inputBrakeRaw.toFixed(1);\n\n                        return;\n                    }\n                    if ( view[0] == 4) {\n                        console.log(view1);\n                        var ratrep;\n                        var offset  = 1;\n                        var fuelLeft = view1.getFloat32(offset, true);\n                        offset += 4;\n                        fuelMonitorTds[5].innerHTML = fuelLeft.toFixed(2);\n                        var fuelForRace = view1.getFloat32(offset, true);\n                        offset += 4;\n                        fuelMonitorTds[4].innerHTML = fuelForRace;\n                        try {\n                            relativeTds[5][1].innerHTML = loadedRat[view1.getInt32(offset, true)].Fullname;\n                            ratrep = loadedRat[view1.getInt32(offset, true)].Rating + \"/\" + loadedRat[view1.getInt32(offset, true)].Reputation;\n                            offset += 4;\n                            relativeTds[5][0].innerHTML = view1.getInt32(offset, true);\n                            offset += 4;\n                            relativeTds[5][2].innerHTML = ratrep;\n                            \n                            if ( view1.getInt32(offset, true) != 0 ) {\n                                relativeTds[4][1].innerHTML = loadedRat[view1.getInt32(offset, true)].Fullname;\n                                ratrep = loadedRat[view1.getInt32(offset, true)].Rating + \"/\" + loadedRat[view1.getInt32(offset, true)].Reputation;\n                                offset += 4;\n                                relativeTds[4][0].innerHTML = view1.getInt8(offset, true);\n                                offset += 1;\n                                relativeTds[4][2].innerHTML = ratrep;\n                                relativeTds[4][3].innerHTML = view1.getFloat32(offset, true)>-999&&view1.getFloat32(offset, true)<999?view1.getFloat32(offset, true).toFixed(3):(view1.getFloat32(offset, true)/1000).toFixed(0);\n                                offset += 4;\n                            } else {\n                                offset += 9;\n                            }\n                            \n                            if ( view1.getInt32(offset, true) != 0 ) {\n                                relativeTds[3][1].innerHTML = loadedRat[view1.getInt32(offset, true)].Fullname;\n                                ratrep = loadedRat[view1.getInt32(offset, true)].Rating + \"/\" + loadedRat[view1.getInt32(offset, true)].Reputation;\n                                offset += 4;\n                                relativeTds[3][0].innerHTML = view1.getInt8(offset, true);\n                                offset += 1;\n                                relativeTds[3][2].innerHTML = ratrep;\n                                relativeTds[3][3].innerHTML = view1.getFloat32(offset, true)>-999&&view1.getFloat32(offset, true)<999?view1.getFloat32(offset, true).toFixed(3):(view1.getFloat32(offset, true)/1000).toFixed(0);\n                                offset += 4;\n                            } else {\n                                offset += 9;\n                            }\n                            \n                            if ( view1.getInt32(offset, true) != 0 ) {\n                                relativeTds[2][1].innerHTML = loadedRat[view1.getInt32(offset, true)].Fullname;\n                                ratrep = loadedRat[view1.getInt32(offset, true)].Rating + \"/\" + loadedRat[view1.getInt32(offset, true)].Reputation;\n                                offset += 4;\n                                relativeTds[2][0].innerHTML = view1.getInt8(offset, true);\n                                offset += 1;\n                                relativeTds[2][2].innerHTML = ratrep;\n                                relativeTds[2][3].innerHTML = view1.getFloat32(offset, true)>-999&&view1.getFloat32(offset, true)<999?view1.getFloat32(offset, true).toFixed(3):(view1.getFloat32(offset, true)/1000).toFixed(0);\n                                offset += 4;\n                            } else {\n                                offset += 9;\n                            }\n                            if ( view1.getInt32(offset, true) != 0 ) {\n                                relativeTds[1][1].innerHTML = loadedRat[view1.getInt32(offset, true)].Fullname;\n                                ratrep = loadedRat[view1.getInt32(offset, true)].Rating + \"/\" + loadedRat[view1.getInt32(offset, true)].Reputation;\n                                offset += 4;\n                                relativeTds[1][0].innerHTML = view1.getInt8(offset, true);\n                                offset += 1;\n                                relativeTds[1][2].innerHTML = ratrep;\n                                relativeTds[1][3].innerHTML = view1.getFloat32(offset, true)>-999&&view1.getFloat32(offset, true)<999?view1.getFloat32(offset, true).toFixed(3):(view1.getFloat32(offset, true)/1000).toFixed(0);\n                                offset += 4;\n                            } else {\n                                offset += 9;\n                            }\n                            if ( view1.getInt32(offset, true) != 0 ) {\n                                relativeTds[0][1].innerHTML = loadedRat[view1.getInt32(offset, true)].Fullname;\n                                ratrep = loadedRat[view1.getInt32(offset, true)].Rating + \"/\" + loadedRat[view1.getInt32(offset, true)].Reputation;\n                                offset += 4;\n                                relativeTds[0][0].innerHTML = view1.getInt8(offset, true);\n                                offset += 1;\n                                relativeTds[0][2].innerHTML = ratrep;\n                                relativeTds[0][3].innerHTML = view1.getFloat32(offset, true)>-999&&view1.getFloat32(offset, true)<999?view1.getFloat32(offset, true).toFixed(3):(view1.getFloat32(offset, true)/1000).toFixed(0);\n                                offset += 4;\n                            } else {\n                                offset += 9;\n                            }\n                            if ( view1.getInt32(offset, true) != 0 ) {\n                                relativeTds[6][1].innerHTML = loadedRat[view1.getInt32(offset, true)].Fullname;\n                                ratrep = loadedRat[view1.getInt32(offset, true)].Rating + \"/\" + loadedRat[view1.getInt32(offset, true)].Reputation;\n                                offset += 4;\n                                relativeTds[6][0].innerHTML = view1.getInt8(offset, true);\n                                offset += 1;\n                                relativeTds[6][2].innerHTML = ratrep;\n                                relativeTds[6][3].innerHTML = view1.getFloat32(offset, true)>-999&&view1.getFloat32(offset, true)<999?view1.getFloat32(offset, true).toFixed(3):(view1.getFloat32(offset, true)/1000).toFixed(0);\n                                offset += 4;\n                            } else {\n                                offset += 9;\n                            }\n                            if ( view1.getInt32(offset, true) != 0 ) {\n                                relativeTds[7][1].innerHTML = loadedRat[view1.getInt32(offset, true)].Fullname;\n                                ratrep = loadedRat[view1.getInt32(offset, true)].Rating + \"/\" + loadedRat[view1.getInt32(offset, true)].Reputation;\n                                offset += 4;\n                                relativeTds[7][0].innerHTML = view1.getInt8(offset, true);\n                                offset += 1;\n                                relativeTds[7][2].innerHTML = ratrep;\n                                relativeTds[7][3].innerHTML = view1.getFloat32(offset, true)>-999&&view1.getFloat32(offset, true)<999?view1.getFloat32(offset, true).toFixed(3):(view1.getFloat32(offset, true)/1000).toFixed(0);\n                                offset += 4;\n                            } else {\n                                offset += 9;\n                            }\n                            if ( view1.getInt32(offset, true) != 0 ) {\n                                relativeTds[8][1].innerHTML = loadedRat[view1.getInt32(offset, true)].Fullname;\n                                ratrep = loadedRat[view1.getInt32(offset, true)].Rating + \"/\" + loadedRat[view1.getInt32(offset, true)].Reputation;\n                                offset += 4;\n                                relativeTds[8][0].innerHTML = view1.getInt8(offset, true);\n                                offset += 1;\n                                relativeTds[8][2].innerHTML = ratrep;\n                                relativeTds[8][3].innerHTML = view1.getFloat32(offset, true)>-999&&view1.getFloat32(offset, true)<999?view1.getFloat32(offset, true).toFixed(3):(view1.getFloat32(offset, true)/1000).toFixed(0);\n                                offset += 4;\n                            } else {\n                                offset += 9;\n                            }\n                            if ( view1.getInt32(offset, true) != 0 ) {\n                                relativeTds[9][1].innerHTML = loadedRat[view1.getInt32(offset, true)].Fullname;\n                                ratrep = loadedRat[view1.getInt32(offset, true)].Rating + \"/\" + loadedRat[view1.getInt32(offset, true)].Reputation;\n                                offset += 4;\n                                relativeTds[9][0].innerHTML = view1.getInt8(offset, true);\n                                offset += 1;\n                                relativeTds[9][2].innerHTML = ratrep;\n                                relativeTds[9][3].innerHTML = view1.getFloat32(offset, true)>-999&&view1.getFloat32(offset, true)<999?view1.getFloat32(offset, true).toFixed(3):(view1.getFloat32(offset, true)/1000).toFixed(0);\n                                offset += 4;\n                            } else {\n                                offset += 9;\n                            }\n                            if ( view1.getInt32(offset, true) != 0 ) {\n                                relativeTds[10][1].innerHTML = loadedRat[view1.getInt32(offset, true)].Fullname;\n                                ratrep = loadedRat[view1.getInt32(offset, true)].Rating + \"/\" + loadedRat[view1.getInt32(offset, true)].Reputation;\n                                offset += 4;\n                                relativeTds[10][0].innerHTML = view1.getInt8(offset, true);\n                                offset += 1;\n                                relativeTds[10][2].innerHTML = ratrep;\n                                relativeTds[10][3].innerHTML = view1.getFloat32(offset, true)>-999&&view1.getFloat32(offset, true)<999?view1.getFloat32(offset, true).toFixed(3):(view1.getFloat32(offset, true)/1000).toFixed(0);\n                                offset += 4;\n                            } else {\n                                offset += 9;\n                            }\n                        } catch (err) {}\n                        return;\n                    }\n                    if ( view[0] == 5) {\n                        let decoder = new TextDecoder('utf-8');\n                        let str = decoder.decode(new DataView(event.data, 1, view1.byteLength-2));\n                        let arr = str.split(',');\n\n                        let obj = {\n                            UserId: arr[0],\n                            Fullname: arr[1],\n                            Rating: arr[2],\n                            Reputation: arr[3]\n                        };\n\n                        loadedRat[arr[0]] = obj;\n                        return;\n                    }\n                    if ( view[0] == 6 ) {\n                        var offset = 1;\n                        var lastLapHtml = view1.getFloat32(offset, true);\n                        if (lastLapHtml == -1) {\n                            lastLap.innerHTML = \"-:--.---\";\n                        } else {\n                            var res = Math.floor(lastLapHtml / 60);\n                            if ( res >= 1 ) {\n                                lastLap.innerHTML = res+\":\"+(lastLapHtml - 60 * res).toFixed(3).padStart(6, '0');;\n                            } else {\n                                lastLap.innerHTML = lastLapHtml.toFixed(3).padStart(6, '0');;\n                            }\n                        }\n                        \n                        if ( view1.byteLength < 6 ) {\n                            return;\n                        }\n                        offset += 4;\n                        \n                        var bestLapHtml= view1.getFloat32(offset, true);\n                        if (bestLapHtml == 9999 || bestLapHtml == -1 ) {\n                            bestLap.innerHTML = \"-:--.---\";\n                        } else {\n                            var res = Math.floor(bestLapHtml / 60);\n                            if ( res >= 1 ) {\n                                bestLap.innerHTML = res+\":\"+(bestLapHtml - 60 * res).toFixed(3).padStart(6, '0');;\n                            } else {\n                                bestLap.innerHTML = bestLapHtml.toFixed(3).padStart(6, '0');;\n                            }\n                        }\n                        offset += 4;\n                        \n                        var bestLapLeadHtml = view1.getFloat32(offset, true);\n                        \n                        if (bestLapLeadHtml == -1) {\n                            bestLapLead.innerHTML = \"-:--.---\";\n                        } else {\n                            var res = Math.floor(bestLapLeadHtml / 60);\n                            if ( res >= 1 ) {\n                                bestLapLead.innerHTML = res+\":\"+(bestLapLeadHtml - 60 * res).toFixed(3).padStart(6, '0');;\n                            } else {\n                                bestLapLead.innerHTML = bestLapLeadHtml.toFixed(3).padStart(6, '0');;\n                            }\n                        }\n                        \n                        if ( view1.byteLength < 14 ) {\n                            return;\n                        }\n                        offset += 4;\n\n                        var timeHtml = view1.getFloat32(offset, true);\n                        if (timeHtml == 9999) {\n                            fuelMonitorTds[3].innerHTML = \"-:--.---\";\n                        } else {\n                            var res = Math.floor(timeHtml / 60);\n                            if ( res >= 1 ) {\n                                fuelMonitorTds[3].innerHTML = res+\":\"+(timeHtml - 60 * res).toFixed(3).padStart(6, '0');;\n                            } else {\n                                fuelMonitorTds[3].innerHTML = timeHtml.toFixed(3).padStart(6, '0');;\n                            }\n                        }\n                        \n                        if ( view1.byteLength < 16 ) {\n                            return;\n                        }\n                        offset += 4;\n                        \n                        var fuelHtml = view1.getFloat32(offset, true);\n                        fuelHtml = fuelHtml == 9999 ? \"-\" : fuelHtml.toFixed(2);\n                        fuel";
//char* responz4 = "MonitorTds[2].innerHTML = fuelHtml;\n                        offset += 4;\n\n                        return;\n                    }\n                    if ( view[0] == 7 ) {\n                        startLight.classList.remove('hide');\n                        switch (view1.getUint32(1, true)) {\n                            case 0:\n                            break;\n                            case 1:\n                                startLightDivs[0].classList.remove('off');\n                                startLightDivs[0].classList.add('red');\n                            break;\n                            case 2:\n                                startLightDivs[1].classList.remove('off');\n                                startLightDivs[1].classList.add('red');\n                            break;\n                            case 3:\n                                startLightDivs[2].classList.remove('off');\n                                startLightDivs[2].classList.add('red');\n                            break;\n                            case 4:\n                                startLightDivs[3].classList.remove('off');\n                                startLightDivs[3].classList.add('red');\n                            break;\n                            case 5:\n                                startLightDivs[4].classList.remove('off');\n                                startLightDivs[4].classList.add('red');\n                            break;\n                            case 6:\n                                startLightDivs[0].classList.add('off');\n                                startLightDivs[0].classList.remove('red');\n                                startLightDivs[1].classList.add('off');\n                                startLightDivs[1].classList.remove('red');\n                                startLightDivs[2].classList.add('off');\n                                startLightDivs[2].classList.remove('red');\n                                startLightDivs[3].classList.add('off');\n                                startLightDivs[3].classList.remove('red');\n                                startLightDivs[4].classList.add('off');\n                                startLightDivs[4].classList.remove('red');\n                                startLightDivs[5].classList.add('green');\n                                startLightDivs[5].classList.remove('off');\n                                setTimeout(function() {\n                                    startLight.classList.add('hide');\n                                }, 3000);\n                            break;\n                        }\n                        return;\n                    }\n                    if ( view[0] == 8 ) {\n                        console.log(\"askong\");\n                        let id = view1.getUint32(1, true);\n                        setTimeout(function() {\n                            console.log(\"requsting\");\n                            try {\n                                let xhr = new XMLHttpRequest();\n                                xhr.open(\"GET\", 'https://game.raceroom.com/multiplayer-rating/user/'+id+'.json', true);\n                                xhr.onreadystatechange = function () {\n                                    if (xhr.readyState == 4 && xhr.status == 200) {\n                                        console.log(JSON.parse(xhr.responseText));\n                                        let jsn = JSON.parse(xhr.responseText);\n                                        //jsn.UserId\n                                        //jsn.Fullname\n                                        jsn.Rating = Math.floor(jsn.Rating);\n                                        jsn.Reputation = Math.floor(jsn.Reputation);\n                                        \n                                        let parts = jsn.Fullname.split(' ');\n                                        if (parts.length === 2) {\n                                            jsn.Fullname = parts[0].charAt(0) + '. ' + parts[1];\n                                        }\n                                        let resultRat = \"1\"+jsn.UserId+\",\"+jsn.Fullname+\",\"+jsn.Rating+\",\"+jsn.Reputation;\n                                        loadedRat[jsn.UserId] = {\n                                            \"UserId\" : jsn.UserId,\n                                            \"Fullname\" : jsn.Fullname,\n                                            \"Rating\" : jsn.Rating,\n                                            \"Reputation\" : jsn.Reputation,\n                                        };\n                                        socket.send(resultRat);\n                                    } else {\n                                        loadedRat[id] = {\n                                            \"UserId\" : id,\n                                            \"Fullname\" : \"None\",\n                                            \"Rating\" : 0,\n                                            \"Reputation\" : 0,\n                                        };\n                                    }\n                                }\n                                xhr.send();\n                            } catch (err) {\n                                loadedRat[id] = {\n                                    \"UserId\" : id,\n                                    \"Fullname\" : \"None\",\n                                    \"Rating\" : 0,\n                                    \"Reputation\" : 0,\n                                };\n                            }\n                        }, delay);\n                        delay += 100;\n                        return;\n                    }\n                    if (view[0] == 9) {\n                        if ( view1.byteLength < 3 ) {\n                            document.querySelector(\"body\").classList.remove('hide');\n                            addSettingsListeners();\n                        } else {\n                            var ofst = 0;\n                            var w,h = 0;\n                            console.log(view1);\n                            document.querySelectorAll(\"#resizable-table\").forEach(function (element) {\n                                console.log(view1.getInt16(1 + ofst, true));\n                                var style = \"\";\n                                style += \"left: \"+view1.getInt16(1 + ofst, true)+\"px; \";\n                                ofst += 2\n                                style += \"top: \"+view1.getInt16(1 + ofst, true)+\"px; \";\n                                ofst += 2\n                                style += \"width: \"+view1.getInt16(1 + ofst, true)+\"px; \";\n                                w = view1.getInt16(1 + ofst, true);\n                                ofst += 2\n                                style += \"height: \"+view1.getInt16(1 + ofst, true)+\"px;\";\n                                h = view1.getInt16(1 + ofst, true);\n                                ofst += 2\n                                var d = view1.getInt16(1 + ofst, true);\n                                ofst += 2\n                                var f = view1.getInt16(1 + ofst, true);\n                                ofst += 2\n                                element.firstElementChild.style.cssText = \"transform: scale(\"+d+\".\"+f+\");\"\n                                element.style.cssText = style;\n                            });\n                            document.querySelector(\"body\").classList.remove('hide');\n                        }\n                        return;\n                    }\n                } else {\n                    console.log(\"nonbin\");\n                    console.log(event.data);\n                }\n            });\n            socket.addEventListener('close', (event) => { console.log(`Server closed connection: ${event.code} ${event.reason}`); });\n            socket.addEventListener('error', (event) => { console.error('WebSocket error:', event); });\n        });\n    </script>\n    <style type=\"text/css\">\n        body {\n            margin: 0;\n            overflow: hidden;\n            user-select: none; \n        }\n\n        .hide {\n            display: none;\n        }\n\n        .border {\n            border: 1px solid #ccc;\n        }\n\n        #resizable-table {\n            position: absolute;\n            width: 400px;\n            height: 300px;\n            overflow: hidden;\n        }\n\n        table {\n            table-layout: fixed;\n        }\n\n        th,\n        td {\n            padding: 0px;\n            border: 1px solid #ccc;\n            width: 1px;\n            white-space: nowrap;\n        }\n\n        #draggable-corner {\n            position: absolute;\n            width: 15px;\n            height: 15px;\n            top: 0;\n            left: 0;\n            background-color: #3498db;\n        }\n\n        .tg {\n            border-collapse: collapse;\n            border-spacing: 0;\n        }\n\n        .tg td {\n            border-color: black;\n            border-style: solid;\n            border-width: 1px;\n            font-family: Arial, sans-serif;\n            font-size: 14px;\n            overflow: hidden;\n            padding: 10px 5px;\n            word-break: normal;\n        }\n\n        .tg th {\n            border-color: black;\n            border-style: solid;\n            border-width: 1px;\n            font-family: Arial, sans-serif;\n            font-size: 14px;\n            font-weight: normal;\n            overflow: hidden;\n            padding: 10px 5px;\n            word-break: normal;\n        }\n\n        .tg .tg-11kk {\n            background-color: #656565;\n            border-color: #f8a102;\n            color: #ffffff;\n            font-size: 36px;\n            text-align: center;\n            vertical-align: middle\n        }\n\n        .tg .tg-agb7 {\n            background-color: #fd6864;\n            border-color: #f8a102;\n            color: #ffffff;\n            font-size: 36px;\n            text-align: center;\n            vertical-align: middle\n        }\n\n        .tg .tg-2uwx {\n            background-color: #343434;\n            border-color: #f8a102;\n            color: #ffffff;\n            font-size: 16px;\n            font-weight: bold;\n            text-align: center;\n            vertical-align: middle\n        }\n\n        .tg .tg-6wkr {\n            background-color: #656565;\n            border-color: #f8a102;\n            color: #fd6864;\n            font-size: 18px;\n            font-weight: bold;\n            text-align: center;\n            vertical-align: middle\n        }\n\n        .tg .tg-vr5q {\n            background-color: #656565;\n            border-color: #f8a102;\n            color: #67fd9a;\n            font-size: 18px;\n            font-weight: bold;\n            text-align: center;\n            vertical-align: middle\n        }\n\n        .tg .tg-ivzj {\n            background-color: #656565;\n            border-color: #9b9b9b;\n            color: #ffffff;\n            text-align: center;\n            vertical-align: middle\n        }\n\n        .tg .tg-a0w5 {\n            background-color: #656565;\n            color: #ffffff;\n            text-align: center;\n            vertical-align: middle\n        }\n\n        .tg .tg-be88 {\n            background-color: #656565;\n            border-color: inherit;\n            color: #ffffff;\n            font-size: 36px;\n            text-align: center;\n            vertical-align: middle\n        }\n\n        .tg .tg-wqw7 {\n            background-color: #656565;\n            border-color: inherit;\n            color: #ffffff;\n            font-size: 24px;\n            text-align: center;\n            vertical-align: middle\n        }\n\n        .tg .tg-yeut {\n            background-color: #656565;\n            border-color: inherit;\n            color: #ffffff;\n            font-weight: bold;\n            text-align: center;\n            vertical-align: middle\n        }\n\n        .tg .tg-a0w51{\n            background-color:#656565;\n            color:#ffffff;\n            text-align:center;\n            vertical-align:middle;\n            height: 5px;\n        }\n\n        .tg .tg-xtf7{background-color:#656565;border-color:#000000;color:#ffffff;font-weight:bold;text-align:center;vertical-align:middle}\n        .tg .tg-11ac{background-color:#656565;border-color:#000000;color:#ffffff;font-size:28px;font-weight:bold;text-align:center;\n          vertical-align:middle}\n\n        .outer-block {\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            align-items: center;\n            font-size: 26px;\n            font-weight: bold;\n            color: white;\n            text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black; \n        }\n\n        .scaler {\n            \n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            align-items: center;\n            font-size: 26px;\n            font-weight: bold;\n            color: white; \n            text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black; \n        }\n\n        #toggle-settings {\n            position: absolute;\n            width: 15px;\n            height: 15px;\n            top: 0;\n            right: 0;\n            background-color: #3498db;\n        }\n\n        .over {\n            display: grid;\n            grid-template-columns: repeat(2, 1fr);\n            grid-template-rows: repeat(5, 1fr);\n            justify-items: center;\n            align-items: center;\n            position: relative;\n            grid-row-gap: 7px; \n            grid-column-gap: 5px; \n        }\n        .container {\n            top: 500px;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            height: 300px;\n            position: relative;\n        }\n\n        .div {\n            width: 100px;\n            height: 300px;\n            background-color: blue;\n            border: 2px solid black;\n        }\n\n        .div:first-child {\n            border-top-left-radius: 10px;\n            border-bottom-left-radius: 10px;\n        }\n\n        .div:last-child {\n            border-top-right-radius: 10px;\n            border-bottom-right-radius: 10px;\n        }\n\n        .content {\n            position: relative; \n            top: 10px; \n            left: calc(23%);\n            color: white;\n            font-size: 40px;\n            text-shadow: -2px 1px black, 0 2px black, 2px 0 black, 0 -2px black;\n        }\n\n        .data {\n            display: inline;\n        }\n\n        .sign {\n            display: inline;\n        }\n\n        .big-text {\n            position: absolute;\n            top: calc(56%);\n            left: calc(50%);\n            color: white;\n            font-size: 90px;\n            transform: translate(-50%, -50%);\n            text-shadow: -2px 0 black, 0 2px black, 2px 0 black, 0 -2px black;\n        }\n\n        .upper-text {\n            text-wrap: nowrap;\n            position: absolute;\n            top: calc(24%);\n            left: calc(50%);\n            color: white;\n            font-size: 35px;\n            transform: translateX(-50%);\n            text-shadow: -2px 0 black, 0 2px black, 2px 0 black, 0 -2px black;\n        }\n\n        .under-text {\n            positi";
//char* responz5 = "on: absolute;\n            top: calc(77%);\n            left: calc(50%);\n            color: white;\n            font-size: 40px;\n            transform: translateX(-50%);\n            text-shadow: -2px 0 black, 0 2px black, 2px 0 black, 0 -2px black;\n        }\n\n        .small-div {\n            width: 30px; \n            height: 100px; \n            background-color: blue;\n            border-radius: 10px; \n            border: 2px solid black; \n            position:relative; \n            left:-38px; \n            bottom: -60px;\n        }\n\n        .small-div-right {\n            width: 30px; \n            height: 100px; \n            background-color: blue;\n            border-radius: 10px; \n            border: 2px solid black; \n            position:relative; \n            left: 312px; \n            bottom: -60px;\n        }\n        .vertical-text {\n            position:absolute; \n            bottom:34%; \n            left:-8px; /*3*/\n            color:white; \n            font-size:x-large; \n            transform-origin:center center; \n            transform:rotate(-270deg);\n        }\n        \n        .traffic-light {\n            width: 50px;\n            background-color: #333;\n            border-radius: 10px;\n            padding: 10px;\n        }\n\n        .light {\n            height: 50px;\n            width: 50px;\n            margin-bottom: 10px;\n            border-radius: 50%;\n        }\n\n        .red {\n            background-color: #f00;\n        }\n\n        .green {\n            background-color: #0f0;\n        }\n        .off {\n            background-color: #555;\n        }\n    </style>\n</head>\n\n<body class=\"hide\">\n    <div id=\"resizable-table\" class=\"outer-block\">\n        <div class=\"scaler\">\n            <table class=\"tg\" id=\"fuelmonitor\">\n                <tbody>\n                    <tr>\n                    <td class=\"tg-xtf7\">Fuel/Lap</td>\n                    <td class=\"tg-xtf7\">Best Lap</td>\n                    </tr>\n                    <tr>\n                    <td class=\"tg-11ac\">9.99</td>\n                    <td class=\"tg-11ac\">8:32.000</td>\n                    </tr>\n                    <tr>\n                    <td class=\"tg-11ac\">432.00</td>\n                    <td class=\"tg-11ac\">200.00</td>\n                    </tr>\n                    <tr>\n                    <td class=\"tg-xtf7\">Fuel Race</td>\n                    <td class=\"tg-xtf7\">Fuel Remain</td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n        <div id=\"draggable-corner\" class=\"hide\"></div>\n    </div>\n\n\n    <div id=\"resizable-table\" class=\"outer-block\">\n        <div class=\"scaler\">\n            <table class=\"tg\" id=\"relative\">\n                <tbody>\n                    <tr>\n                        <td class=\"tg-a0w5\"></td>\n                        <td class=\"tg-a0w5\"></td>\n                        <td class=\"tg-a0w5\"></td>\n                        <td class=\"tg-a0w5\"></td>\n                    </tr>\n                    <tr>\n                        <td class=\"tg-a0w5\"></td>\n                        <td class=\"tg-a0w5\"></td>\n                        <td class=\"tg-a0w5\"></td>\n                        <td class=\"tg-a0w5\"></td>\n                    </tr>\n                    <tr>\n                        <td class=\"tg-a0w5\"></td>\n                        <td class=\"tg-a0w5\"></td>\n                        <td class=\"tg-a0w5\"></td>\n                        <td class=\"tg-a0w5\"></td>\n                    </tr>\n                    <tr>\n                        <td class=\"tg-a0w5\"></td>\n                        <td class=\"tg-a0w5\"></td>\n                        <td class=\"tg-a0w5\"></td>\n                        <td class=\"tg-a0w5\"></td>\n                    </tr>\n                    <tr>\n                        <td class=\"tg-a0w5\"></td>\n                        <td class=\"tg-a0w5\"></td>\n                        <td class=\"tg-a0w5\"></td>\n                        <td class=\"tg-a0w5\"></td>\n                    </tr>\n                    <tr>\n                        <td class=\"tg-a0w5\"></td>\n                        <td class=\"tg-a0w5\"></td>\n                        <td class=\"tg-a0w5\"></td>\n                        <td class=\"tg-a0w5\"></td>\n                    </tr>\n                    <tr>\n                        <td class=\"tg-a0w5\"></td>\n                        <td class=\"tg-a0w5\"></td>\n                        <td class=\"tg-a0w5\"></td>\n                        <td class=\"tg-a0w5\"></td>\n                    </tr>\n                    <tr>\n                        <td class=\"tg-a0w5\"></td>\n                        <td class=\"tg-a0w5\"></td>\n                        <td class=\"tg-a0w5\"></td>\n                        <td class=\"tg-a0w5\"></td>\n                    </tr>\n                    <tr>\n                        <td class=\"tg-a0w5\"></td>\n                        <td class=\"tg-a0w5\"></td>\n                        <td class=\"tg-a0w5\"></td>\n                        <td class=\"tg-a0w5\"></td>\n                    </tr>\n                    <tr>\n                        <td class=\"tg-a0w5\"></td>\n                        <td class=\"tg-a0w5\"></td>\n                        <td class=\"tg-a0w5\"></td>\n                        <td class=\"tg-a0w5\"></td>\n                    </tr>\n                    <tr>\n                        <td class=\"tg-a0w5\"></td>\n                        <td class=\"tg-a0w5\"></td>\n                        <td class=\"tg-a0w5\"></td>\n                        <td class=\"tg-a0w5\"></td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n        <div id=\"draggable-corner\" class=\"hide\"></div>\n\n    </div>\n    <div id=\"resizable-table\" class=\"canv\">\n        <div class=\"scaler\">\n            <canvas class=\"border\" id=\"myCanvas\" width=\"400\" height=\"400\"></canvas>\n        </div>\n        <div id=\"draggable-corner\" class=\"hide\"></div>\n    </div>\n    <div id=\"resizable-table\" class=\"outer-block\">\n        <div class=\"scaler\">\n            <div id=\"delta\" class=\"inner-block\">-</div>\n            <div class=\"inner-block\">Delta</div>\n        </div>\n        <div id=\"draggable-corner\" class=\"hide\"></div>\n    </div>\n    <div id=\"resizable-table\" class=\"outer-block\">\n        <div class=\"scaler\">\n            <div id=\"bestlap\" class=\"inner-block\">-</div>\n            <div class=\"inner-block\">Best Lap</div>\n        </div>\n        <div id=\"draggable-corner\" class=\"hide\"></div>\n    </div>\n    <div id=\"resizable-table\" class=\"outer-block\">\n        <div class=\"scaler\">\n            <div id=\"bestlaplead\" class=\"inner-block\">-</div>\n            <div class=\"inner-block\">Best Lap Leader</div>\n        </div>\n        <div id=\"draggable-corner\" class=\"hide\"></div>\n    </div>\n    <div id=\"resizable-table\" class=\"outer-block\">\n        <div class=\"scaler\">\n            <div id=\"lastlap\" class=\"inner-block\">-</div>\n            <div class=\"inner-block\">Last Lap</div>\n        </div>\n        <div id=\"draggable-corner\" class=\"hide\"></div>\n    </div>\n    <div id=\"resizable-table\" class=\"outer-block\">\n        <div class=\"scaler\">\n            <table class=\"tg\" id=\"inputs\">\n                <tbody>\n                    <tr>\n                        <td class=\"tg-a0w51\">100</td>\n                        <td class=\"tg-a0w51\">100</td>\n                    </tr>\n                    <tr>\n                        <td class=\"tg-a0w51\">100</td>\n                        <td class=\"tg-a0w51\">100</td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n        <div id=\"draggable-corner\" class=\"hide\"></div>\n    </div>\n    <div id=\"toggle-settings\"></div>\n    \n    <div id=\"resizable-table\" class=\"outer-block\">\n        <div class=\"over scaler\">\n            <div class=\"container\">\n    \n                <div class=\"div\">\n                <div class=\"content\"><div class=\"data\" id=\"flTemp1\">123</div><div class=\"sign\">°</div></div>\n                <div class=\"big-text\"><div class=\"data\" id=\"flWear\">100</div><div class=\"sign\"></div></div>\n                <div class=\"upper-text\"><div class=\"data\" id=\"flPressure\">241</div><div class=\"sign\"> kPa</div></div>\n                <div class=\"under-text\"><div class=\"data\" id=\"flDirt\">100</div><div class=\"sign\">%</div></div>\n                <div class=\"small-div\"><div class=\"vertical-text\"><div class=\"data\" id=\"flBrake\">123</div><div class=\"sign\">°</div></div></div>\n                </div>\n                \n                <div class=\"div\">\n                <div class=\"content\"><div class=\"data\" id=\"flTemp2\">456</div><div class=\"sign\">°</div></div>\n                </div>\n                \n                <div class=\"div\">\n                <div class=\"content\"><div class=\"data\" id=\"flTemp3\">789</div><div class=\"sign\">°</div></div>\n                </div>\n                \n            </div>\n            <div class=\"container\">\n    \n                <div class=\"div\">\n                <div class=\"content\"><div class=\"data\" id=\"frTemp1\">123</div><div class=\"sign\">°</div></div>\n                <div class=\"big-text\"><div class=\"data\" id=\"frWear\">100</div><div class=\"sign\"></div></div>\n                <div class=\"upper-text\"><div class=\"data\" id=\"frPressure\">241</div><div class=\"sign\"> kPa</div></div>\n                <div class=\"under-text\"><div class=\"data\" id=\"frDirt\">100</div><div class=\"sign\">%</div></div>\n                <div class=\"small-div-right\"><div class=\"vertical-text\"><div class=\"data\" id=\"frBrake\">123</div><div class=\"sign\">°</div></div></div>\n                </div>\n                \n                <div class=\"div\">\n                <div class=\"content\"><div class=\"data\" id=\"frTemp2\">456</div><div class=\"sign\">°</div></div>\n                </div>\n                \n                <div class=\"div\">\n                <div class=\"content\"><div class=\"data\" id=\"frTemp3\">789</div><div class=\"sign\">°</div></div>\n                </div>\n                \n            </div>\n            <div class=\"container\">\n    \n                <div class=\"div\">\n                <div class=\"content\"><div class=\"data\" id=\"rlTemp1\">123</div><div class=\"sign\">°</div></div>\n                <div class=\"big-text\"><div class=\"data\" id=\"rlWear\">100</div><div class=\"sign\"></div></div>\n                <div class=\"upper-text\"><div class=\"data\" id=\"rlPressure\">241</div><div class=\"sign\"> kPa</div></div>\n                <div class=\"under-text\"><div class=\"data\" id=\"rlDirt\">100</div><div class=\"sign\">%</div></div>\n                <div class=\"small-div\"><div class=\"vertical-text\"><div class=\"data\" id=\"rlBrake\">123</div><div class=\"sign\">°</div></div></div>\n                </div>\n                \n                <div class=\"div\">\n                <div class=\"content\"><div class=\"data\" id=\"rlTemp2\">456</div><div class=\"sign\">°</div></div>\n                </div>\n                \n                <div class=\"div\">\n                <div class=\"content\"><div class=\"data\" id=\"rlTemp3\">789</div><div class=\"sign\">°</div></div>\n                </div>\n                \n            </div>\n            <div class=\"container\">\n    \n                <div class=\"div\">\n                <div class=\"content\"><div class=\"data\" id=\"rrTemp1\">123</div><div class=\"sign\">°</div></div>\n                <div class=\"big-text\"><div class=\"data\" id=\"rrWear\">100</div><div class=\"sign\"></div></div>\n                <div class=\"upper-text\"><div class=\"data\" id=\"rrPressure\">241</div><div class=\"sign\"> kPa</div></div>\n                <div class=\"under-text\"><div class=\"data\" id=\"rrDirt\">111</div><div class=\"sign\">%</div></div>\n                <div class=\"small-div-right\"><div class=\"vertical-text\"><div class=\"data\" id=\"rrBrake\">123</div><div class=\"sign\">°</div></div></div>\n                </div>\n                \n                <div class=\"div\">\n                <div class=\"content\"><div class=\"data\" id=\"rrTemp2\">456</div><div class=\"sign\">°</div></div>\n                </div>\n                \n                <div class=\"div\">\n                <div class=\"content\"><div class=\"data\" id=\"rrTemp3\">789</div><div class=\"sign\">°</div></div>\n                </div>\n                \n            </div>\n        </div>\n        <div id=\"draggable-corner\" class=\"hide\"></div>\n    </div>\n    <div id=\"resizable-table\" class=\"outer-block\">\n        <div class=\"scaler\">\n            <div id=\"startLight\" class=\"inner-block traffic-light hide\">\n                <div class=\"light off\"></div>\n                <div class=\"light off\"></div>\n                <div class=\"light off\"></div>\n                <div class=\"light off\"></div>\n                <div class=\"light off\"></div>\n                <div class=\"light off\"></div>\n            </div>\n        </div>\n        <div id=\"draggable-corner\" class=\"hide\"></div>\n    </div>\n</body>\n</html>\n";
char* responz;

BOOL isClientConnected = FALSE;

DWORD WINAPI thread_function(LPVOID lpParam) {
    int totalLength = strlen(response) + strlen(responz1) + strlen(responz2) + strlen(responz3) + strlen(responz4) + 1;// + strlen(responz5) + 1;
    responz = malloc(totalLength * sizeof(char) + 100000);
    //printf("%d", strlen(responz3));
    if (responz == NULL) {
        // handle error
    }
    else {
        // Initialize the new string
        responz[0] = '\0';

        // Concatenate the strings
        strcat_s(responz, totalLength, response);
        strcat_s(responz, totalLength, responz1);
        strcat_s(responz, totalLength, responz2);
        strcat_s(responz, totalLength, responz3);
        strcat_s(responz, totalLength, responz4);
        //strcat_s(responz, totalLength, responz5);

        // Use the new string
        //printf("%s\n", responz);

        // Remember to free the memory when you're done
        //free(responz);
    }/**/

    WSADATA wsaData;
    SOCKET serverSocket, clientSocket;
    SOCKADDR_IN serverAddr, clientAddr;
    char buffer[1024];
    int iResult, clientAddrLen = sizeof(clientAddr);

    // Initialize Winsock
    iResult = WSAStartup(MAKEWORD(2, 2), &wsaData);
    if (iResult != 0) {
        printf("WSAStartup failed: %d\n", iResult);
        return 1;
    }

    // Create a socket
    serverSocket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
    if (serverSocket == INVALID_SOCKET) {
        printf("socket failed: %ld\n", WSAGetLastError());
        WSACleanup();
        return 1;
    }

    // Bind the socket to an IP address and port
    serverAddr.sin_family = AF_INET;
    serverAddr.sin_port = htons(8081);
    //serverAddr.sin_port = htons(80);
    serverAddr.sin_addr.s_addr = INADDR_ANY;

    iResult = bind(serverSocket, (SOCKADDR*)&serverAddr, sizeof(serverAddr));
    if (iResult == SOCKET_ERROR) {
        printf("bind failed: %d\n", WSAGetLastError());
        closesocket(serverSocket);
        WSACleanup();
        return 1;
    }

    // Listen for incoming connections
    iResult = listen(serverSocket, SOMAXCONN);
    if (iResult == SOCKET_ERROR) {
        printf("listen failed: %d\n", WSAGetLastError());
        closesocket(serverSocket);
        WSACleanup();
        return 1;
    }

    printf("Server is listening on port 80...\n");

    while (1) {
        // Accept a client connection request
        clientSocket = accept(serverSocket, (SOCKADDR*)&clientAddr, &clientAddrLen);
        if (clientSocket == INVALID_SOCKET) {
            printf("accept failed: %d\n", WSAGetLastError());
            closesocket(serverSocket);
            WSACleanup();
            return 1;
        }

        while (1) {
            // Receive data from the client
            memset(buffer, 0, sizeof(buffer));
            iResult = recv(clientSocket, buffer, sizeof(buffer), 0);

            //printf("%d", iResult);
            if (iResult > 0) {
                //printf("Received data from client: %s\n", buffer);
                //printf("sended");
                // Send data back to the client
                //char* response = "HTTP/1.1 200 OK\r\nContent-Type: text/html\r\n\r\n<html><body><h1>Hello World!</h1></body></html>";
                //char* response = "HTTP/1.1 200 OK\r\nContent-Type: text/html\r\n\r\n<!DOCTYPE html><html><head><meta charset=\"UTF - 8\"><title>WebSocket Client Example</title></head><body><script>/*document.body.appendChild(document.createElement(\"h1\")).appendChild(document.createTextNode(\"OLOLOLO\"));*/document.addEventListener(\"DOMContentLoaded\", function(event) {const socket = new WebSocket('ws://localhost:8082');socket.addEventListener('open', (event) => {socket.send('Hello Server!');});socket.addEventListener('message', (event) => {document.querySelector(\"h1\").innerHTML = `${event.data}`;console.log(`Message from server: ${event.data}`);});socket.addEventListener('close', (event) => {console.log(`Server closed connection: ${event.code} ${event.reason}`);});socket.addEventListener('error', (event) => {console.error('WebSocket error:', event);});});</script><h1>Hello World!</h1></body></html>";
                //char* response = "HTTP/1.1 200 OK\r\nContent-Type: text/html\r\n\r\n<html><script>const socket = new WebSocket('ws://localhost:8082');socket.addEventListener('open', (event) = > {socket.send('Hello Server!');});socket.addEventListener('message', (event) = > {console.log(`Message from server : ${ event.data }`);});socket.addEventListener('close', (event) = > {console.log(`Server closed connection : ${ event.code } ${ event.reason }`);});socket.addEventListener('error', (event) = > {console.error('WebSocket error:', event);});</script><body><h1>Hello World!</h1></body></html>";
                send(clientSocket, responz, strlen(responz), 0);
                //send(clientSocket, response, strlen(response), 0);
                closesocket(clientSocket);
                break;
                //printf("Sent data to client: %s\n", response);
                //Sleep(1000);
                //printf("Connection closed.\n");

            }
            else if (iResult == 0) {
                break;
                //printf("Connection closed.\n");
            }
            else {
                //printf("recv failed: %d\n", WSAGetLastError());
                closesocket(clientSocket);
                //WSACleanup();
                break;
                //return 1;
            }

            // Close the client socket
            closesocket(clientSocket);
        }
    }
    // Close the server socket and cleanup Winsock
    closesocket(serverSocket);
    WSACleanup();

    return 0;
}

SOCKET clientSocket;
DWORD WINAPI thread_function1(LPVOID lpParam) {
    WSADATA wsaData;
    SOCKET serverSocket;
    SOCKADDR_IN serverAddr, clientAddr;
    char buffer[1024];
    int iResult, clientAddrLen = sizeof(clientAddr);

    // Initialize Winsock
    iResult = WSAStartup(MAKEWORD(2, 2), &wsaData);
    if (iResult != 0) {
        printf("WSAStartup failed: %d\n", iResult);
        return 1;
    }

    // Create a socket
    serverSocket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
    if (serverSocket == INVALID_SOCKET) {
        printf("socket failed: %ld\n", WSAGetLastError());
        WSACleanup();
        return 1;
    }

    // Bind the socket to an IP address and port
    serverAddr.sin_family = AF_INET;
    serverAddr.sin_port = htons(8082);
    //serverAddr.sin_port = htons(80);
    serverAddr.sin_addr.s_addr = INADDR_ANY;

    iResult = bind(serverSocket, (SOCKADDR*)&serverAddr, sizeof(serverAddr));
    if (iResult == SOCKET_ERROR) {
        printf("bind failed: %d\n", WSAGetLastError());
        closesocket(serverSocket);
        WSACleanup();
        return 1;
    }

    // Listen for incoming connections
    iResult = listen(serverSocket, SOMAXCONN);
    if (iResult == SOCKET_ERROR) {
        printf("listen failed: %d\n", WSAGetLastError());
        closesocket(serverSocket);
        WSACleanup();
        return 1;
    }

    printf("Server is listening on port 8082...\n");
    while (1) {
        // Accept a client connection request
        clientSocket = accept(serverSocket, (SOCKADDR*)&clientAddr, &clientAddrLen);
        if (clientSocket == INVALID_SOCKET) {
            printf("accept failed: %d\n", WSAGetLastError());
            closesocket(serverSocket);
            WSACleanup();
            return 1;
        }

        // Receive data from the client
        memset(buffer, 0, sizeof(buffer));
        iResult = recv(clientSocket, buffer, sizeof(buffer), 0);
        if (iResult > 0) {
            char code[25];
            int count = 0;
            for (int i = 0; i < sizeof(buffer); i++) {
                if (buffer[i] == '\n') {
                    count++;
                    if (count == 12) {
                        for (int j = 0, k = i - 25; j < 26; j++, k++) {
                            code[j] = buffer[k];
                        }
                        code[24] = '\0';
                        //printf("%s\n", code);
                        break;
                    }
                }
            }
            char* charsss = gethandshakeKey(code);
            char charz[30];
            strcpy_s(charz, 30, charsss);
            //printf("%s\n", charz);
            //printf("Received data from client: %s\n", buffer);

            char response[200] = "HTTP/1.1 101 Switching Protocols\r\nUpgrade: websocket\r\nConnection: Upgrade\r\nSec-WebSocket-Accept: s3pPLMBiTxaQ9kYGzzhZRbK+xOo=";
            for (int i = 97, k = 0; i < 124; i++, k++) {
                response[i] = charz[k];
            }
            response[125] = '\r';
            response[126] = '\n';
            response[127] = '\r';
            response[128] = '\n';
            send(clientSocket, response, strlen(response), 0);
            //iResult = recv(clientSocket, buffer, sizeof(buffer), 0);
            unsigned char chrs[200];
            chrs[0] = 130;
            chrs[2] = 9;
            BlobResult resp = readWindowsSettings();
            //resp[0] = 'a';
            chrs[1] = resp.size + 1;
            //printf("%s\n", resp.data);rks?
            //printf("\n%s\n", chrs[3]);
            //chrs[3] = 1;
            memcpy(chrs + 3, resp.data, resp.size);
            //chrs[3] = 1;

            /*printf("\ntret\n");
            for (size_t i = 0; i < 100; i++)
            {
                printf("%d ", (int)chrs[i]);
                //offse += 2;
            }*/
            //Sleep(1000);
            /*printf("%d / ", (int)resp.size);
            for (size_t i = 0; i < 100; i++)
            {
                printf("%d ", (int)resp.data[i]);
                //offse += 2;
            }*/
            send(clientSocket, chrs, chrs[1] + 2, 0);
            chrs[2] = 6;
            chrs[1] = 1;
            memcpy(&chrs[2 + chrs[1]], &lapsAndFuelData.previousLap, 4);
            chrs[1] += 4;
            memcpy(&chrs[2 + chrs[1]], &lapsAndFuelData.currentBestLap, 4);
            chrs[1] += 4;
            memcpy(&chrs[2 + chrs[1]], &lapsAndFuelData.leaderBestLap, 4);
            chrs[1] += 4;
            memcpy(&chrs[2 + chrs[1]], &lapsAndFuelData.allBestLap, 4);
            chrs[1] += 4;
            memcpy(&chrs[2 + chrs[1]], &lapsAndFuelData.allBestFuel, 4);
            chrs[1] += 4;
            send(clientSocket, chrs, chrs[1] + 2, 0);
            //unsigned char tezt[4] = {130,2,3,9};
            //sendMessage(tezt, tezt[1]);
            //sendMessage(chrs, chrs[1]);
            /*printf("\n\n");
            for (size_t i = 0+2; i < chrs[1] + 2; i++)
            {
                printf("%d ", chrs[i]);
            }
            printf("\n\n");*/
            //printf("\n\nsended %s %d\n\n", chrs+2, chrs[1]);
        }
        //Sleep(1000);
        isClientConnected = TRUE;
        currentState = -1;
        //memset(playerRatingInfoSended.ids, 0, sizeof(playerRatingInfoSended.ids));
        //playerRatingInfoSended.size = 0;
        while (1) {

            // Receive data from the client
            memset(buffer, 0, sizeof(buffer));
            iResult = recv(clientSocket, buffer, sizeof(buffer), 0);
            if (iResult > 0) {
                //int len = strlen(ascii_str);
                BYTE arr[200];
                //memset(arr, 0, 200);
                /*for (size_t i = 0; i < 200; i++) {
                    if (buffer[i] == '\0')
                        break;

                    arr[i] = buffer[i];
                    //printf("%d ", arr[i] & (1 << 2));
                    printf("%d ", arr[i]);
                }
                printf("\n");
                for (size_t i = 0; i < 200; i++) {
                    if (buffer[i] == '\0')
                        break;

                    arr[i] = buffer[i];
                    //printf("%d\n", arr[i] & (1 << 2));
                    printf("%d ", arr[i] & 0b01111111);
                }
                printf("\n");*/
                const int msglen = buffer[1] & 0b01111111;
                int offset = 2;
                BYTE decoded[200];
                BYTE masks[4] = { buffer[offset], buffer[offset + 1], buffer[offset + 2], buffer[offset + 3] };
                offset += 4;

                for (int i = 0; i < msglen + 1; ++i) {
                    if (i == msglen) {
                        decoded[i] = '\0';
                        break;
                    }
                    decoded[i] = (byte)(buffer[offset + i] ^ masks[i % 4]);
                }

                //printf("\n%s\n", decoded);
                //printf("\n%s\n", &decoded[2]);
                /*char code[25];
                int count = 0;
                for (int i = 0; i < sizeof(buffer); i++) {
                    if (buffer[i] == '\n') {
                        count++;
                        if (count == 12) {
                            for (int j = 0, k = i - 25; j < 30; j++, k++) {
                                code[j] = buffer[k];
                            }
                            code[24] = '\0';
                            printf("%s\n", code);
                            break;
                        }
                    }
                }
                char* charsss = gethandshakeKey(code);
                char charz[30];
                strcpy_s(charz, 30, charsss);
                printf("%s\n", charz);*/
                //for (size_t i = 0; i < 100; i += 2)
                //{
                //    printf("%hd ", decoded[i] + (decoded[i + 1] << 8));
                //    //offse += 2;
                //}
                /*for (size_t i = 0; i < 100; i++)
                {
                    printf("%d ", (int)decoded[i]);
                    //offse += 2;
                }
                printf("\n");
                for (size_t i = 0; i < 100; i++)
                {
                    printf("%d ", (int)buffer[i]);
                    //offse += 2;
                }*/
                //if (buffer[0] == -120 && buffer[1] == -126)
                //    continue;
                if (buffer[0] == -120)
                    continue;
                if (decoded[0] == 9) {
                    //printf("\n\n%d\n\n", msglen);
                    writeWindowsSettings(&decoded[2], msglen);
                }
                if (decoded[0] == 49) {
                    //printf("kkkkkkkkkkkkkkkkkkk");

                    //char* str = "12345,Player1,90,100";
                    char* str = &decoded[1];
                    //printf("\n\nstr: %s\n\n", str);
                    //PlayerRatingInfoDb player;
                    //playerRatingInfoDb

                    // Allocate memory for the name
                    playerRatingInfoDb.player[playerRatingInfoDb.size].name = malloc(64);

                    // Parse the string
                    sscanf_s(str, "%lu,%[^,],%d,%d", &playerRatingInfoDb.player[playerRatingInfoDb.size].id, playerRatingInfoDb.player[playerRatingInfoDb.size].name, 64, &playerRatingInfoDb.player[playerRatingInfoDb.size].rating, &playerRatingInfoDb.player[playerRatingInfoDb.size].reputation);
                    
                    //printf("id: %lu\n", playerRatingInfoDb.player[playerRatingInfoDb.size].id);
                    //printf("name: %s\n", playerRatingInfoDb.player[playerRatingInfoDb.size].name);
                    //printf("rating: %d\n", playerRatingInfoDb.player[playerRatingInfoDb.size].rating);
                    //printf("reputation: %d\n", playerRatingInfoDb.player[playerRatingInfoDb.size].reputation);
                    playerRatingInfoDb.size++;
                    // Don't forget to free the memory!
                    //free(player.name);
                    //writeWindowsSettings(&decoded[2], msglen);
                }

                //printf(" %d\n", msglen);
                //printf("Received data from client: %s\n", buffer);
                //buffer[0] = '\0';

                //char chrs[] = { 129, 13, 16, 143, 52, 231, 88, 234, 88, 139, 127, 175, 103, 130, 98, 249, 81, 149, 49 };
                //char chrs[] = { 129, 3, 0x4d, 0x44, 0x4e, '\0'};
                //char chrs[] = { 130, 3, 0x4d, 0x44, 0x4e, '\0' };
                char chrs[] = { 130, 3, 0x4d, 0x44, 0x4e, 130, 3, 0x4d, 0x44, 0x4e, '\0' };
                char msg[] = { 0x4d, 0x44, 0x4e, '\0' };
                //char msg[] = { 130, 0x44, 0x4e, '\0' };
                //Sleep(1000);
                
                //sendMessage(chrs);
                
                //send(clientSocket, chrs, strlen(chrs), 0);
                //printf("\n\nsened ");
                //printf("%s, %d", msg, strlen(chrs));
                //printf(" sened\n\n");

                //printf("Sent data to client: %s");
                //Sleep(1000);
                //closesocket(clientSocket);
                //printf("Connection closed.\n");
            }
            else if (iResult == 0) {
                isClientConnected = FALSE;
                clientSocket = NULL;
                break;
                //printf("Connection closed.\n");
            }
            else {
                isClientConnected = FALSE;
                //printf("recv failed: %d\n", WSAGetLastError());
                closesocket(clientSocket);
                //WSACleanup();
                clientSocket = NULL;
                break;
                //return 1;
            }

            // Close the client socket
            //closesocket(clientSocket);
        }
    }
    // Close the server socket and cleanup Winsock
    closesocket(serverSocket);
    WSACleanup();
    

    return 0;
}

void sendMessage(const unsigned char* chars[], int size) {
    if (clientSocket) {
        //printf("sended %s\n", chars);
        send(clientSocket, chars, size/*strlen(chars)*/, 0);
    }
}

void startServers() {
    HANDLE thread_handle = NULL;
    DWORD thread_id;

    thread_handle = CreateThread(NULL, 0, thread_function, NULL, 0, &thread_id);

    if (thread_handle == NULL) {
        printf("Thread creation failed\n");
        //return 1;
    }

    // Wait for the thread to finish
    //WaitForSingleObject(thread_handle, INFINITE);

    // Close the thread handle
    //CloseHandle(thread_handle);
    
    HANDLE thread_handle1 = NULL;
    DWORD thread_id1;

    thread_handle1 = CreateThread(NULL, 0, thread_function1, NULL, 0, &thread_id1);

    if (thread_handle1 == NULL) {
        printf("Thread creation failed\n");
        //return 1;
    }

    // Wait for the thread to finish
    //WaitForSingleObject(thread_handle1, INFINITE);

    // Close the thread handle
    //CloseHandle(thread_handle1);
}
